var a=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},z=class{static fromArray(t,r){let n=r||new Ar;for(let i=t.length-1;i>=0;--i)n=new Ot(t[i],n);return n}[Symbol.iterator](){return new Rn(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}};function m(e,t){return new Ot(e,t)}function u(e,t){return z.fromArray(e,t)}var Rn=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof Ar)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},Ar=class extends z{},Ot=class extends z{constructor(t,r){super(),this.head=t,this.tail=r}},Lr=class e{constructor(t){if(!(t instanceof Uint8Array))throw"BitArray can only be constructed from a Uint8Array";this.buffer=t}get length(){return this.buffer.length}byteAt(t){return this.buffer[t]}floatFromSlice(t,r,n){return tu(this.buffer,t,r,n)}intFromSlice(t,r,n,i){return eu(this.buffer,t,r,n,i)}binaryFromSlice(t,r){return new e(this.buffer.slice(t,r))}sliceAfter(t){return new e(this.buffer.slice(t))}};function eu(e,t,r,n,i){let s=0;if(n)for(let o=t;o<r;o++)s=s*256+e[o];else for(let o=r-1;o>=t;o--)s=s*256+e[o];if(i){let l=2**((r-t)*8-1);s>=l&&(s-=l*2)}return s}function tu(e,t,r,n){let i=new DataView(e.buffer),s=r-t;if(s===8)return i.getFloat64(t,!n);if(s===4)return i.getFloat32(t,!n);{let o=`Sized floats must be 32-bit or 64-bit on JavaScript, got size of ${s*8} bits`;throw new globalThis.Error(o)}}var tt=class e extends a{static isResult(t){return t instanceof e}},c=class extends tt{constructor(t){super(),this[0]=t}isOk(){return!0}},f=class extends tt{constructor(t){super(),this[0]=t}isOk(){return!1}};function k(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!$s(n)||!$s(i)||!au(n,i)||nu(n,i)||iu(n,i)||su(n,i)||ou(n,i)||lu(n,i)||uu(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[l,p]=ru(n);for(let d of l(n))r.push(p(n,d),p(i,d))}return!0}function ru(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function nu(e,t){return e instanceof Date&&(e>t||e<t)}function iu(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function su(e,t){return Array.isArray(e)&&e.length!==t.length}function ou(e,t){return e instanceof Map&&e.size!==t.size}function lu(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function uu(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function $s(e){return typeof e=="object"&&e!==null}function au(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function he(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.fn=n;for(let l in s)o[l]=s[l];return o}var $=class extends a{constructor(t){super(),this[0]=t}},_=class extends a{};function rt(e,t){if(e instanceof $){let r=e[0];return new c(r)}else return new f(t)}function jt(e){if(e.isOk()){let t=e[0];return new $(t)}else return new _}function Ee(e,t){return e instanceof $?e[0]:t}function vr(e,t){if(e instanceof $){let r=e[0];return new $(t(r))}else return new _}var nt=class extends a{constructor(t,r){super(),this.content=t,this.submatches=r}},Or=class extends a{constructor(t,r){super(),this.error=t,this.byte_index=r}},jr=class extends a{constructor(t,r){super(),this.case_insensitive=t,this.multi_line=r}};function ms(e,t){return hs(e,t)}function Er(e,t){return ws(e,t)}function Et(e){return e>=0?e:e*-1}function Te(e){return gs(e)}function j(e){return ys(e)}function bs(e){return e[1]}function cu(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function Kn(e){return cu(e,0)}function fu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=m(i,n)}}}function G(e){return fu(e,u([]))}function Tt(e){if(e.hasLength(0))return new f(void 0);{let t=e.head;return new c(t)}}function du(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return G(s);{let o=n.head;e=n.tail,t=i,r=m(i(o),s)}}}function E(e,t){return du(e,t,u([]))}function _u(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return G(l);{let p=i.head,d=i.tail,h=m(s(p,o),l);e=d,t=s,r=o+1,n=h}}}function qr(e,t){return _u(e,t,0,u([]))}function $u(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new c(G(s));{let o=n.head,l=n.tail,p=i(o);if(p.isOk()){let d=p[0];e=l,t=i,r=m(d,s)}else{let d=p[0];return new f(d)}}}}function St(e,t){return $u(e,t,u([]))}function Ct(e,t){for(;;){let r=e,n=t;if(n<=0)return r;if(r.hasLength(0))return u([]);e=r.tail,t=n-1}}function mu(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return G(s);if(n.hasLength(0))return G(s);{let l=n.head;e=n.tail,t=i-1,r=m(l,s)}}}function Vn(e,t){return mu(e,t,u([]))}function hu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=m(i,n)}}}function xe(e,t){return hu(G(e),t)}function wu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=m(i,n)}}}function xu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return G(n);{let i=r.head;e=r.tail,t=wu(i,n)}}}function Yn(e){return xu(e,u([]))}function Ge(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function gu(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return s;{let p=i.head;e=i.tail,t=o(s,p,l),r=o,n=l+1}}}function Zn(e,t,r){return gu(e,t,r,0)}function yu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new f(void 0);{let i=r.head,s=r.tail,o=n(i);if(o.isOk()){let l=o[0];return new c(l)}else e=s,t=n}}}function bu(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return G(s);{let o=n.head;e=n.tail,t=i,r=m(o,m(i,s))}}}function Mr(e,t){if(e.hasLength(0))return e;if(e.hasLength(1))return e;{let r=e.head,n=e.tail;return bu(n,t,u([r]))}}function ku(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return s;e=n,t=i-1,r=m(n,s)}}function ks(e,t){return ku(e,t,u([]))}function ge(e,t){return yu(e,r=>{let n=r[0],i=r[1];return k(n,t)?new c(i):new f(void 0)})}function zr(e,t,r){if(e.hasLength(0))return u([[t,r]]);if(e.atLeastLength(1)&&k(e.head[0],t)){let n=e.head[0],i=e.tail;return m([t,r],i)}else{let n=e.head,i=e.tail;return m(n,zr(i,t,r))}}function T(e,t){if(e.isOk()){let r=e[0];return new c(t(r))}else{let r=e[0];return new f(r)}}function pe(e,t){if(e.isOk()){let r=e[0];return new c(r)}else{let r=e[0];return new f(t(r))}}function N(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new f(r)}}function C(e,t){return N(e,t)}function Be(e,t){return e.isOk()?e[0]:t}function As(e){return pe(e,t=>{})}function Xn(e,t){if(e.isOk()){let r=e[0];return new c(r)}else return new f(t)}function Qn(){return zt(u([]))}function Ce(e){return zt(e)}function ei(e){return zt(e)}function Mt(e){return e}function X(e){return e}function ri(e){return js(e)}function Me(e){return ti(e)}function Pt(e,t){return Ss(e,t)}function Ft(e){let r=Ce(e);return X(r)}function Q(e,t){return Ts(e,t)}function It(e){return Es(e)}function vs(e,t,r){let i=Pr(e),s=Ct(i,t),o=Vn(s,r);return Ft(o)}function Os(e,t,r){if(r<0)return"";if(t<0){let s=ri(e)+t;return s<0?"":vs(e,s,r)}else return vs(e,t,r)}function Fr(e,t){return t<0?e:Os(e,t,ri(e)-t)}var K=class extends a{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}};function Ir(e){return new c(e)}function Dt(e){return pi(e)}function Ms(e){return Fs(e)}function Cu(e){return Ds(e)}function zs(e){return t=>Gs(t,e)}function qs(e,t){let r=e===1?"":"s",n=(()=>{let i=u(["Tuple of at least ",j(e)," element",r]),s=Ce(i),o=X(s);return new K(o,Dt(t),u([]))})();return new f(u([n]))}function Dr(e){return t=>{if(e.hasLength(0))return new f(u([new K("another type",Dt(t),u([]))]));{let r=e.head,n=e.tail,i=r(t);if(i.isOk()){let s=i[0];return new c(s)}else return Dr(n)(t)}}}function se(e){return e.isOk()?u([]):e[0]}function si(e,t){return r=>{let n=t(r);if(n.isOk()){let i=n[0];return new c(e(i))}else{let i=n;return new f(se(i))}}}function oi(e,t){let r=t,n=Dr(u([q,s=>T(Ms(s),j)])),i=(()=>{let s=n(r);if(s.isOk())return s[0];{let o=u(["<",Dt(r),">"]),l=Ce(o);return X(l)}})();return e.withFields({path:m(i,e.path)})}function ce(e){return t=>N(Cu(t),r=>{let i=St(r,e);return li(i,s=>oi(s,"*"))})}function li(e,t){return pe(e,r=>E(r,t))}function q(e){return Ps(e)}function M(e,t){return r=>{let n=new K("field","nothing",u([]));return N(Bs(r,e),i=>{let o=rt(i,u([n])),l=N(o,t);return li(l,p=>oi(p,e))})}}function ui(e,t){return r=>N(Is(r),n=>{let i=Nt(n);return N(e>=0?e<i?ii(n,e):qs(e+1,r):Et(e)<=i?ii(n,i+e):qs(Et(e),r),s=>{let o=t(s);return li(o,l=>oi(l,e))})})}function ai(e,t,r,n){return i=>{let s=t(i),o=r(i),l=n(i);if(s.isOk()&&o.isOk()&&l.isOk()){let p=s[0],d=o[0],h=l[0];return new c(e(p,d,h))}else{let p=s,d=o,h=l;return new f(Yn(u([se(p),se(d),se(h)])))}}}function Ns(e,t,r,n,i,s,o,l){return p=>{let d=t(p),h=r(p),x=n(p),y=i(p),L=s(p),Y=o(p),Oe=l(p);if(d.isOk()&&h.isOk()&&x.isOk()&&y.isOk()&&L.isOk()&&Y.isOk()&&Oe.isOk()){let je=d[0],$e=h[0],g=x[0],b=y[0],S=L[0],D=Y[0],me=Oe[0];return new c(e(je,$e,g,b,S,D,me))}else{let je=d,$e=h,g=x,b=y,S=L,D=Y,me=Oe;return new f(Yn(u([se(je),se($e),se(g),se(b),se(S),se(D),se(me)])))}}}var Hs=new WeakMap,ci=new DataView(new ArrayBuffer(8)),fi=0;function di(e){let t=Hs.get(e);if(t!==void 0)return t;let r=fi++;return fi===2147483647&&(fi=0),Hs.set(e,r),r}function _i(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function mi(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Rs(e){ci.setFloat64(0,e);let t=ci.getInt32(0),r=ci.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function qu(e){return mi(e.toString())}function Mu(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return di(e);if(e instanceof Date)return Rs(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+te(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+te(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+_i(te(n),te(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+_i(te(o),mi(s))|0}}return r}function te(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Rs(e);case"string":return mi(e);case"bigint":return qu(e);case"object":return Mu(e);case"symbol":return di(e);case"function":return di(e);default:return 0}}var de=5,hi=Math.pow(2,de),zu=hi-1,Nu=hi/2,Pu=hi/4,H=0,fe=1,V=2,He=3,wi={type:V,bitmap:0,array:[]};function Gt(e,t){return e>>>t&zu}function Hr(e,t){return 1<<Gt(e,t)}function Fu(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function xi(e,t){return Fu(e&t-1)}function re(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function Iu(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function $i(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Us(e,t,r,n,i,s){let o=te(t);if(o===n)return{type:He,hash:o,array:[{type:H,k:t,v:r},{type:H,k:i,v:s}]};let l={val:!1};return Bt(gi(wi,e,o,t,r,l),e,n,i,s,l)}function Bt(e,t,r,n,i,s){switch(e.type){case fe:return Du(e,t,r,n,i,s);case V:return gi(e,t,r,n,i,s);case He:return Gu(e,t,r,n,i,s)}}function Du(e,t,r,n,i,s){let o=Gt(r,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:fe,size:e.size+1,array:re(e.array,o,{type:H,k:n,v:i})};if(l.type===H)return k(n,l.k)?i===l.v?e:{type:fe,size:e.size,array:re(e.array,o,{type:H,k:n,v:i})}:(s.val=!0,{type:fe,size:e.size,array:re(e.array,o,Us(t+de,l.k,l.v,r,n,i))});let p=Bt(l,t+de,r,n,i,s);return p===l?e:{type:fe,size:e.size,array:re(e.array,o,p)}}function gi(e,t,r,n,i,s){let o=Hr(r,t),l=xi(e.bitmap,o);if(e.bitmap&o){let p=e.array[l];if(p.type!==H){let h=Bt(p,t+de,r,n,i,s);return h===p?e:{type:V,bitmap:e.bitmap,array:re(e.array,l,h)}}let d=p.k;return k(n,d)?i===p.v?e:{type:V,bitmap:e.bitmap,array:re(e.array,l,{type:H,k:n,v:i})}:(s.val=!0,{type:V,bitmap:e.bitmap,array:re(e.array,l,Us(t+de,d,p.v,r,n,i))})}else{let p=e.array.length;if(p>=Nu){let d=new Array(32),h=Gt(r,t);d[h]=gi(wi,t+de,r,n,i,s);let x=0,y=e.bitmap;for(let L=0;L<32;L++){if(y&1){let Y=e.array[x++];d[L]=Y}y=y>>>1}return{type:fe,size:p+1,array:d}}else{let d=Iu(e.array,l,{type:H,k:n,v:i});return s.val=!0,{type:V,bitmap:e.bitmap|o,array:d}}}}function Gu(e,t,r,n,i,s){if(r===e.hash){let o=yi(e,n);if(o!==-1)return e.array[o].v===i?e:{type:He,hash:r,array:re(e.array,o,{type:H,k:n,v:i})};let l=e.array.length;return s.val=!0,{type:He,hash:r,array:re(e.array,l,{type:H,k:n,v:i})}}return Bt({type:V,bitmap:Hr(e.hash,t),array:[e]},t,r,n,i,s)}function yi(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(k(t,e.array[n].k))return n;return-1}function Br(e,t,r,n){switch(e.type){case fe:return Bu(e,t,r,n);case V:return Hu(e,t,r,n);case He:return Ru(e,n)}}function Bu(e,t,r,n){let i=Gt(r,t),s=e.array[i];if(s!==void 0){if(s.type!==H)return Br(s,t+de,r,n);if(k(n,s.k))return s}}function Hu(e,t,r,n){let i=Hr(r,t);if(!(e.bitmap&i))return;let s=xi(e.bitmap,i),o=e.array[s];if(o.type!==H)return Br(o,t+de,r,n);if(k(n,o.k))return o}function Ru(e,t){let r=yi(e,t);if(!(r<0))return e.array[r]}function bi(e,t,r,n){switch(e.type){case fe:return Uu(e,t,r,n);case V:return Wu(e,t,r,n);case He:return Ju(e,n)}}function Uu(e,t,r,n){let i=Gt(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===H){if(!k(s.k,n))return e}else if(o=bi(s,t+de,r,n),o===s)return e;if(o===void 0){if(e.size<=Pu){let l=e.array,p=new Array(e.size-1),d=0,h=0,x=0;for(;d<i;){let y=l[d];y!==void 0&&(p[h]=y,x|=1<<d,++h),++d}for(++d;d<l.length;){let y=l[d];y!==void 0&&(p[h]=y,x|=1<<d,++h),++d}return{type:V,bitmap:x,array:p}}return{type:fe,size:e.size-1,array:re(e.array,i,o)}}return{type:fe,size:e.size,array:re(e.array,i,o)}}function Wu(e,t,r,n){let i=Hr(r,t);if(!(e.bitmap&i))return e;let s=xi(e.bitmap,i),o=e.array[s];if(o.type!==H){let l=bi(o,t+de,r,n);return l===o?e:l!==void 0?{type:V,bitmap:e.bitmap,array:re(e.array,s,l)}:e.bitmap===i?void 0:{type:V,bitmap:e.bitmap^i,array:$i(e.array,s)}}return k(n,o.k)?e.bitmap===i?void 0:{type:V,bitmap:e.bitmap^i,array:$i(e.array,s)}:e}function Ju(e,t){let r=yi(e,t);if(r<0)return e;if(e.array.length!==1)return{type:He,hash:e.hash,array:$i(e.array,r)}}function Ws(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===H){t(s.v,s.k);continue}Ws(s,t)}}}var Re=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=Br(this.root,0,te(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?wi:this.root,s=Bt(i,0,te(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=bi(this.root,0,te(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:Br(this.root,0,te(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){Ws(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+_i(te(r),te(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;let r=!0;return this.forEach((n,i)=>{r=r&&k(t.get(i,!n),n)}),r}};var Ht=void 0,Js={};function gs(e){return/^[-+]?(\d+)$/.test(e)?new c(parseInt(e)):new f(Ht)}function ys(e){return e.toString()}function js(e){if(e==="")return 0;let t=ki(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function Pr(e){let t=ki(e);return t?z.fromArray(Array.from(t).map(r=>r.segment)):z.fromArray(e.match(/./gsu))}function ki(e){if(globalThis.Intl&&Intl.Segmenter)return new Intl.Segmenter().segment(e)[Symbol.iterator]()}function Es(e){let t,r=ki(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new c([t,e.slice(t.length)]):new f(Ht)}function ti(e){return e.toLowerCase()}function Ts(e,t){let r=e[Symbol.iterator](),n=r.next().value||"",i=r.next();for(;!i.done;)n=n+t+i.value,i=r.next();return n}function zt(e){let t="";for(let r of e)t=t+r;return t}function Nt(e){return e.length}function Ss(e,t){return e.startsWith(t)}var Zs=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),id=new RegExp(`^([${Zs}]*)`,"g"),sd=new RegExp(`([${Zs}]*)$`,"g");function hs(e,t){try{let r="gu";return t.case_insensitive&&(r+="i"),t.multi_line&&(r+="m"),new c(new RegExp(e,r))}catch(r){let n=(r.columnNumber||0)|0;return new f(new Or(r.message,n))}}function ws(e,t){let r=Array.from(t.matchAll(e)).map(n=>{let i=n[0],s=[];for(let o=n.length-1;o>0;o--){if(n[o]){s[o-1]=new $(n[o]);continue}s.length>0&&(s[o-1]=new _)}return new nt(i,z.fromArray(s))});return z.fromArray(r)}function Xs(){return Re.new()}function it(e){return z.fromArray(e.entries())}function Qs(e,t){return t.delete(e)}function eo(e,t){let r=e.get(t,Js);return r===Js?new f(Ht):new c(r)}function to(e,t,r){return r.set(e,t)}function Ks(e){return decodeURIComponent((e||"").replace("+"," "))}function ro(e){return encodeURIComponent(e).replace("%2B","+")}function no(e){try{let t=[];for(let r of e.split("&")){let[n,i]=r.split("=");if(!n)continue;let s=Ks(n),o=Ks(i);t.push([s,o])}return new c(z.fromArray(t))}catch{return new f(Ht)}}function pi(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof tt)return"Result";if(e instanceof z)return"List";if(e instanceof Lr)return"BitArray";if(e instanceof Re)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function Rt(e,t){return Ku(e,pi(t))}function Ku(e,t){return new f(z.fromArray([new K(e,t,z.fromArray([]))]))}function Ps(e){return typeof e=="string"?new c(e):Rt("String",e)}function Fs(e){return Number.isInteger(e)?new c(e):Rt("Int",e)}function Is(e){return Array.isArray(e)?new c(e):Rt("Tuple",e)}function ii(e,t){return t>=0&&e.length>t?new c(e[t]):new f(Ht)}function Ds(e){return Array.isArray(e)?new c(z.fromArray(e)):e instanceof z?new c(e):Rt("List",e)}function Gs(e,t){if(e==null||e instanceof _)return new c(new _);e instanceof $&&(e=e[0]);let r=t(e);return r.isOk()?new c(new $(r[0])):r}function Bs(e,t){let r=()=>Rt("Dict",e);if(e instanceof Re||e instanceof WeakMap||e instanceof Map){let n=eo(e,t);return new c(n.isOk()?new $(n[0]):new _)}else return e===null?r():Object.getPrototypeOf(e)==Object.prototype?Vs(e,t,()=>new c(new _)):Vs(e,t,r)}function Vs(e,t,r){try{return t in e?new c(new $(e[t])):r()}catch{return r()}}function J(){return Xs()}function ie(e,t,r){return to(t,r,e)}function Yu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=ie(n,i[0],i[1])}}}function Gr(e){return Yu(e,J())}function Zu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=m(i,n)}}}function Xu(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return Zu(n,u([]));{let i=r.head;e=r.tail,t=m(i[0],n)}}}function Qu(e){let t=it(e);return Xu(t,u([]))}function Rr(e){return Qu(e)}function Ai(e,t){return Qs(t,e)}function io(e,t){for(;;){let r=e,n=t;if(n.hasLength(0))return r;{let i=n.head,s=n.tail;e=Ai(r,i),t=s}}}var Ut=class extends a{constructor(t,r,n,i,s,o,l){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=l}};function so(e,t){let n=ms(e,new jr(!0,!1)),i=As(n),s=T(i,p=>Er(p,t)),o=N(s,Tt),l=T(o,p=>p.submatches);return Be(l,u([]))}function ea(e){if(e instanceof _)return new _;{let t=e[0],r=It(t);if(r.isOk()&&r[0][0]==="?"){let n=r[0][1];return new $(n)}else return new _}}function Ur(e){return e instanceof $&&e[0]===""?new _:e instanceof _?new _:e}function ta(e,t){for(;;){let r=e,n=t;if(n===0)return 0;if(r.hasLength(0))return n;e=r.tail,t=n-1}}function oo(e,t){return xe(e,ks(new _,ta(e,t)))}function ra(e){let t=Ee(e,"");if(t==="")return[new _,new _,new _];if(t==="//")return[new _,new $(""),new _];{let r=t,n=(()=>{let s=so("^(//)?((.*)@)?(\\[[a-zA-Z0-9:.]*\\]|[^:]*)(:(\\d*))?",r);return oo(s,6)})();if(n.hasLength(6)){let i=n.tail.tail.head,s=n.tail.tail.tail.head,o=n.tail.tail.tail.tail.tail.head,l=Ur(i),p=Ur(s),d=(()=>{let x=Ee(o,""),y=Te(x);return jt(y)})();return[l,p,d]}else return[new _,new _,new _]}}function na(e){let t="^(([a-z][a-z0-9\\+\\-\\.]*):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#.*)?",r=(()=>{let b=so(t,e);return oo(b,8)})(),n=(()=>{if(r.hasLength(8)){let g=r.tail.head,b=r.tail.tail.head,S=r.tail.tail.tail.tail.head,D=r.tail.tail.tail.tail.tail.head,me=r.tail.tail.tail.tail.tail.tail.tail.head;return[g,b,S,D,me]}else return[new _,new _,new _,new _,new _]})(),i=n[0],s=n[1],o=n[2],l=n[3],p=n[4],d=Ur(i),h=Ee(o,""),x=ea(l),y=ra(s),L=y[0],Y=y[1],Oe=y[2],je=(()=>{let b=rt(p,void 0),S=N(b,It),D=T(S,bs);return jt(D)})(),$e=(()=>{let b=Ur(d);return vr(b,Me)})();return new c(new Ut($e,L,Y,Oe,h,x,je))}function Wr(e){return na(e)}function Li(e){return no(e)}function vi(e){return ro(e)}function lo(e){let t=(()=>{let l=e.fragment;if(l instanceof $){let p=l[0];return u(["#",p])}else return u([])})(),r=(()=>{let l=e.query;if(l instanceof $){let p=l[0];return m("?",m(p,t))}else return t})(),n=m(e.path,r),i=(()=>{let l=e.host,p=Pt(e.path,"/");if(l instanceof $&&!p&&l[0]!==""){let d=l[0];return m("/",n)}else return n})(),s=(()=>{let l=e.host,p=e.port;if(l instanceof $&&p instanceof $){let d=p[0];return m(":",m(j(d),i))}else return i})(),o=(()=>{let l=e.scheme,p=e.userinfo,d=e.host;if(l instanceof $&&p instanceof $&&d instanceof $){let h=l[0],x=p[0],y=d[0];return m(h,m("://",m(x,m("@",m(y,s)))))}else if(l instanceof $&&p instanceof _&&d instanceof $){let h=l[0],x=d[0];return m(h,m("://",m(x,s)))}else if(l instanceof $&&p instanceof $&&d instanceof _){let h=l[0];return m(h,m(":",s))}else if(l instanceof $&&p instanceof _&&d instanceof _){let h=l[0];return m(h,m(":",s))}else if(l instanceof _&&p instanceof _&&d instanceof $){let h=d[0];return m("//",m(h,s))}else return s})();return Ft(o)}function be(e,t,r){return e?t:r()}function ji(e){return JSON.stringify(e)}function uo(e){return Object.fromEntries(e)}function ao(e){return e.toArray()}function po(){return null}function co(e){try{let t=JSON.parse(e);return new c(t)}catch(t){return new f(sa(t,e))}}function sa(e,t){return oa(e)?new Kr:la(e,t)}function oa(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function la(e,t){let r=[ua,aa,ca,pa];for(let n of r){let i=n(e,t);if(i)return i}return new ze("",0)}function ua(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=Jr(r[1]);return new ze(n,-1)}function aa(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=Jr(r[1]),i=Number(r[2]);return new ze(n,i)}function pa(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=fa(i,s,t),l=Jr(t[o]);return new ze(l,o)}function ca(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=Jr(r[2]);return new ze(n,0)}function Jr(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function fa(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var Kr=class extends a{},ze=class extends a{constructor(t,r){super(),this.byte=t,this.position=r}};var Vr=class extends a{constructor(t){super(),this[0]=t}};function _a(e,t){return C(co(e),r=>{let n=t(r);return pe(n,i=>new Vr(i))})}function Yr(e,t){return _a(e,t)}function fo(e){return ji(e)}function F(e){return e}function $a(){return po()}function _o(e,t){if(e instanceof $){let r=e[0];return t(r)}else return $a()}function Ne(e){return uo(e)}function Ti(e){return ao(e)}function ke(e,t){let n=E(e,t);return Ti(n)}var Zr=class extends a{constructor(t){super(),this.all=t}};function ma(e){return new Zr(u([t=>e(t.dispatch,t.emit,t.select)]))}function W(e){return ma((t,r,n)=>e(t))}function We(){return new Zr(u([]))}var ot=class extends a{constructor(t){super(),this.content=t}},v=class extends a{constructor(t,r,n,i,s,o,l){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=l}},Je=class extends a{constructor(t){super(),this.subtree=t}},lt=class extends a{constructor(t,r){super(),this.elements=t,this.key=r}},ut=class extends a{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},Jt=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}};function xa(e){if(e instanceof ut)return new f(void 0);{let t=e[0],r=e[1],n=Fr(t,2);return new c([n,r])}}function $o(e,t,r){return Zn(e,t,(n,i,s)=>{let o=r+"-"+j(s);return ho(i,n,o)})}function ho(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof ot)return i;if(n instanceof Je){let o=n.subtree;e=o(),t=i,r=s}else if(n instanceof v){let o=n.attrs,l=n.children,p=Ge(o,i,(d,h)=>{let x=xa(h);if(x.isOk()){let y=x[0][0],L=x[0][1];return ie(d,s+"-"+y,L)}else return d});return $o(l,p,s)}else{let o=n.elements;return $o(o,i,s)}}}function wo(e){return ho(e,J(),"0")}function Kt(e,t){return new ut(e,t,!1)}function go(e,t){return new Jt("on"+e,t)}function w(e){return Kt("class",e)}function Vt(e){return Kt("id",e)}function yo(e){return Kt("placeholder",e)}function bo(e){return Kt("href",e)}function at(e){return Kt("src",e)}function R(e,t,r){return e==="area"?new v("","",e,t,u([]),!1,!0):e==="base"?new v("","",e,t,u([]),!1,!0):e==="br"?new v("","",e,t,u([]),!1,!0):e==="col"?new v("","",e,t,u([]),!1,!0):e==="embed"?new v("","",e,t,u([]),!1,!0):e==="hr"?new v("","",e,t,u([]),!1,!0):e==="img"?new v("","",e,t,u([]),!1,!0):e==="input"?new v("","",e,t,u([]),!1,!0):e==="link"?new v("","",e,t,u([]),!1,!0):e==="meta"?new v("","",e,t,u([]),!1,!0):e==="param"?new v("","",e,t,u([]),!1,!0):e==="source"?new v("","",e,t,u([]),!1,!0):e==="track"?new v("","",e,t,u([]),!1,!0):e==="wbr"?new v("","",e,t,u([]),!1,!0):new v("","",e,t,r,!1,!1)}function Xr(e,t){if(e instanceof v){let r=e.namespace,n=e.tag,i=e.attrs,s=e.children,o=e.self_closing,l=e.void;return new v(t,r,n,i,s,o,l)}else if(e instanceof Je){let r=e.subtree;return new Je(()=>Xr(r(),t))}else if(e instanceof lt){let n=e.elements,i=qr(n,(s,o)=>{if(s instanceof v){let l=s.key,p=l===""?t+"-"+j(o):t+"-"+l;return Xr(s,p)}else return Xr(s,t)});return new lt(i,t)}else return e}function Qr(e,t){return e(E(t,r=>{let n=r[0],i=r[1];return Xr(i,n)}))}function ko(e){return new ot(e)}var Ci=class extends a{constructor(t){super(),this.dict=t}};function Ao(){return new Ci(J())}var en=class extends a{constructor(t){super(),this[0]=t}},tn=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},rn=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}};function vo(e){return k(e.created,J())&&k(e.removed,Ao())&&k(e.updated,J())}var nn=class extends a{constructor(t){super(),this[0]=t}},sn=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},Yt=class extends a{constructor(t){super(),this[0]=t}},_e=class extends a{constructor(t){super(),this[0]=t}},Zt=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},on=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}};var Xt=class extends a{},ln=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},un=class extends a{constructor(t){super(),this[0]=t}},an=class extends a{constructor(t){super(),this[0]=t}};function qi(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:l}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let p=document.createTextNode(o.content);l.replaceChild(p,s),n??=p}else{let p=document.createTextNode(o.content);l.appendChild(p),n??=p}else if(o.tag!==void 0){let p=La({prev:s,next:o,dispatch:r,stack:i});s?s!==p&&l.replaceChild(p,s):l.appendChild(p),n??=p}else if(o.elements!==void 0)for(let p of pn(o))i.unshift({prev:s,next:p,parent:l}),s=s?.nextSibling}return n}function La({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),l;if(Qt.has(o))l=Qt.get(o);else{let g=new Map;Qt.set(o,g),l=g}let p=s?new Set(l.keys()):null,d=s?new Set(Array.from(e.attributes,g=>g.name)):null,h=null,x=null,y=null;if(s&&t.tag==="textarea"){let g=t.children[Symbol.iterator]().next().value?.content;g!==void 0&&(o.value=g)}for(let g of t.attrs){let b=g[0],S=g[1];if(g.as_property)o[b]!==S&&(o[b]=S),s&&d.delete(b);else if(b.startsWith("on")){let D=b.slice(2),me=r(S,D==="input");l.has(D)||o.addEventListener(D,er),l.set(D,me),s&&p.delete(D)}else if(b.startsWith("data-lustre-on-")){let D=b.slice(15),me=r(va);l.has(D)||o.addEventListener(D,er),l.set(D,me),o.setAttribute(b,S)}else b==="class"?h=h===null?S:h+" "+S:b==="style"?x=x===null?S:x+S:b==="dangerous-unescaped-html"?y=S:(o.getAttribute(b)!==S&&o.setAttribute(b,S),(b==="value"||b==="selected")&&(o[b]=S),s&&d.delete(b))}if(h!==null&&(o.setAttribute("class",h),s&&d.delete("class")),x!==null&&(o.setAttribute("style",x),s&&d.delete("style")),s){for(let g of d)o.removeAttribute(g);for(let g of p)l.delete(g),o.removeEventListener(g,er)}if(t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(y!==null)return o.innerHTML=y,o;let L=o.firstChild,Y=null,Oe=null,je=null,$e=tr(t).next().value;if(s&&$e!==void 0&&$e.key!==void 0&&$e.key!==""){Y=new Set,Oe=Oo(e),je=Oo(t);for(let g of tr(t))L=Oa(L,g,o,n,je,Oe,Y)}else for(let g of tr(t))n.unshift({prev:L,next:g,parent:o}),L=L?.nextSibling;for(;L;){let g=L.nextSibling;o.removeChild(L),L=g}return o}var Qt=new WeakMap;function er(e){let t=e.currentTarget;if(!Qt.has(t)){t.removeEventListener(e.type,er);return}let r=Qt.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,er);return}r.get(e.type)(e)}function va(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let l=o.split(".");for(let p=0,d=s,h=e;p<l.length;p++)p===l.length-1?d[l[p]]=h[l[p]]:(d[l[p]]??={},h=h[l[p]],d=d[l[p]]);return s},{data:n})}}function Oo(e){let t=new Map;if(e)for(let r of tr(e)){let n=r?.key||r?.getAttribute?.("data-lustre-key");n&&t.set(n,r)}return t}function Oa(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let p=e.nextSibling;r.removeChild(e),e=p}if(s.size===0){for(let p of tr(t))n.unshift({prev:e,next:p,parent:r}),e=e?.nextSibling;return e}if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let l=s.get(t.key);if(!l&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!l&&e!==null){let p=document.createTextNode("");return r.insertBefore(p,e),n.unshift({prev:p,next:t,parent:r}),e}return!l||l===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(l,e),n.unshift({prev:l,next:t,parent:r}),e)}function*tr(e){for(let t of e.children)yield*pn(t)}function*pn(e){if(e.elements!==void 0)for(let t of e.elements)yield*pn(t);else e.subtree!==void 0?yield*pn(e.subtree()):yield e}var Mi=class e{static start({init:t,update:r,view:n},i,s){if(!Ni())return new f(new rr);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new f(new cn(i));let l=new e(o,t(s),r,n);return new c(p=>l.send(p))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.requestAnimationFrame(()=>this.#n(n.all.toArray(),!0))}root;send(t){if(t instanceof Yt){if(t[0]instanceof an){this.#t=window.cancelAnimationFrame(this.#t),this.#i=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>l=>{let p=s(l);p instanceof c&&this.send(new _e(p[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));qi(i,r,n)}}else if(t instanceof _e){let r=t[0],n=t[1]??!1;this.#i.push(r),n?(this.#t=window.cancelAnimationFrame(this.#t),this.#n()):this.#t||(this.#t=window.requestAnimationFrame(()=>this.#n()))}else if(t instanceof Zt){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof Xt)for(this.#t=window.cancelAnimationFrame(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[],r=!1){if(this.#t=void 0,!this.#o(t,r))return;let n=this.#r(this.#e),i=(o,l=!1)=>p=>{let d=o(p);d instanceof c&&this.send(new _e(d[0],l))},s=this.root.firstChild??this.root.appendChild(document.createTextNode(""));qi(s,n,i)}#o(t=[],r=!1){for(;this.#i.length>0;){let n=this.#i.shift(),[i,s]=this.#s(this.#e,n);r||=this.#e!==i,t=t.concat(s.all.toArray()),this.#e=i}for(;t.length>0;)t.shift()({dispatch:l=>this.send(new _e(l)),emit:(l,p)=>this.root.dispatchEvent(new CustomEvent(l,{detail:p,bubbles:!0,composed:!0})),select:()=>{}});return this.#i.length>0?this.#o(t,r):r}},jo=Mi.start;var zi=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new c(l=>o.send(l))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#i=i,this.#t=i(t),this.#u=s,this.#n=new Map,this.#o=wo(this.#t),this.#l(r.all.toArray())}send(t){if(t instanceof nn){for(let r of t[0]){let n=this.#u.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof f||this.#r.push(i)}this.#l()}else if(t instanceof sn)this.#r=this.#r.concat(t[0].toArray()),this.#l(t[1].all.toArray());else if(!(t instanceof Yt))if(t instanceof _e)this.#r.push(t[0]),this.#l();else if(t instanceof Zt){let r=new tn(t[0],t[1]);for(let[n,i]of this.#n)i(r)}else if(t instanceof on){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof f)return;this.#r.push(n[0]),this.#l()}else if(t instanceof ln){let r=Rr(this.#u),n=new rn(r,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](n)}else t instanceof un&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#u;#l(t=[]){if(!this.#a(!1,t))return;let r=this.#i(this.#e),n=elements(this.#t,r);if(!vo(n)){let i=new en(n);for(let[s,o]of this.#n)o(i)}this.#t=r,this.#o=n.handlers}#a(t=!1,r=[]){for(;this.#r.length>0;){let n=this.#r.shift(),[i,s]=this.#s(this.#e,n);t||=this.#e!==i,r=r.concat(s.all.toArray()),this.#e=i}for(;r.length>0;)r.shift()({dispatch:l=>this.send(new _e(l)),emit:(l,p)=>this.root.dispatchEvent(new CustomEvent(l,{detail:p,bubbles:!0,composed:!0})),select:()=>{}});return this.#r.length>0?this.#a(t,r):t}},ja=zi.start,Ni=()=>globalThis.window&&window.document;var Pi=class extends a{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var cn=class extends a{constructor(t){super(),this.selector=t}},rr=class extends a{};function Eo(e,t,r){return new Pi(e,t,r,new _)}function To(e,t,r){return be(!Ni(),new f(new rr),()=>jo(e,t,r))}var pt=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function fn(e){return Promise.resolve(pt.wrap(e))}function So(e,t){return e.then(r=>t(pt.unwrap(r)))}function dn(e,t){return e.then(r=>pt.wrap(t(pt.unwrap(r))))}function Fi(e,t){return e.catch(r=>t(r))}function Co(e,t){return dn(e,n=>(t(n),n))}function _n(e,t){return So(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return fn(new f(i))}})}function Ii(e){return new Audio(e)}async function Di(e){try{return await e.play(),new c}catch(t){return new f(t.toString())}}function dt(e){let t=document.getElementById(e);return t?new c(t):new f}function Gi(e){let t=e.value;return t!=null?new c(t):new f}function qa(){return globalThis}function Ma(e){window.alert(e)}function za(e,t){return window.addEventListener(e,t)}async function Na(){try{return new c(await window.navigator.wakeLock.request("screen"))}catch(e){return new f(e.toString())}}function Bi(){return window.location.href}function Pa(e){try{return new c(e.location.href)}catch(t){return new f(t.toString())}}function Fa(e,t){e.location.href=t}function Ia(){return window.location.reload()}function Da(e){return e.location.reload()}function Ga(e){return e.focus()}function Ba(){let e=window.location.hash;return e==""?new f:new c(decodeURIComponent(e.slice(1)))}function Ha(){let e=window.location.search;return e==""?new f:new c(decodeURIComponent(e.slice(1)))}function Ra(e){return e.innerHeight}function Ua(e){return e.innerWidth}function Wa(e){return e.outerHeight}function Ja(e){return e.outerWidth}function Ka(e){return e.screenX}function Va(e){return e.screenY}function Ya(e){return e.screenTop}function Za(e){return e.screenLeft}function Xa(e){return e.scrollX}function Qa(e){return e.scrollY}function ep(e,t,r){try{return new c(window.open(e,t,r))}catch(n){return new f(n.toString())}}function tp(e){e.close()}function rp(e){return e.closed}function np(e){return window.queueMicrotask(e)}function ip(e){return window.requestAnimationFrame(e)}function sp(e){return window.cancelAnimationFrame(e)}function op(string){try{return new c(eval(string))}catch(e){return new f(e.toString())}}async function lp(e){try{return new c(await import(e))}catch(t){return new f(t.toString())}}function Hi(e){console.log(e)}function Ri(e){console.warn(e)}function $n(e){console.error(e)}function I(e){return ko(e)}function No(e,t){return R("aside",e,t)}function mn(e,t){return R("h1",e,t)}function Po(e,t){return R("h3",e,t)}function B(e,t){return R("div",e,t)}function hn(e,t){return R("li",e,t)}function wn(e,t){return R("ul",e,t)}function Fo(e,t){return R("a",e,t)}function _t(e,t){return R("span",e,t)}function $t(e){return R("img",e,u([]))}function Ke(e,t){return R("button",e,t)}function xn(e){return R("input",e,u([]))}function Io(e,t){return R("label",e,t)}function Do(e,t){return R("dialog",e,t)}var ne=class extends a{},Ve=class extends a{},gn=class extends a{},yn=class extends a{},nr=class extends a{},bn=class extends a{},kn=class extends a{},An=class extends a{},Ln=class extends a{};var Le=class extends a{},Ye=class extends a{};function Go(e){return e instanceof kn?"connect":e instanceof nr?"delete":e instanceof ne?"get":e instanceof gn?"head":e instanceof An?"options":e instanceof Ln?"patch":e instanceof Ve?"post":e instanceof yn?"put":e instanceof bn?"trace":e[0]}function Bo(e){return e instanceof Le?"http":"https"}var vn=class extends a{constructor(t,r,n,i,s,o,l,p){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=l,this.query=p}};function Jo(e){return new Ut(new $(Bo(e.scheme)),new _,new $(e.host),e.port,e.path,e.query,new _)}function Ui(e,t,r){let n=zr(e.headers,Me(t),r);return e.withFields({headers:n})}function On(e,t){let r=e.method,n=e.headers,i=e.scheme,s=e.host,o=e.port,l=e.path,p=e.query;return new vn(r,n,t,i,s,o,l,p)}function Ko(e,t){let r=i=>Ce(u([vi(i[0]),"=",vi(i[1])])),n=(()=>{let s=E(t,r),o=Mr(s,Mt("&")),l=ei(o),p=X(l);return new $(p)})();return e.withFields({query:n})}function Wi(e,t){return e.withFields({method:t})}function Vo(){return new vn(new ne,u([]),"",new Ye,"localhost",new _,"",new _)}function Yo(e,t){return e.withFields({scheme:t})}function Zo(e,t){return e.withFields({host:t})}function Xo(e,t){return e.withFields({port:new $(t)})}function Qo(e,t){return e.withFields({path:t})}var ve=class extends a{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};async function rl(e){try{return new c(await fetch(e))}catch(t){return new f(new jn(t.toString()))}}function nl(e){return new ve(e.status,z.fromArray([...e.headers]),e)}function il(e){let t=lo(Jo(e)),r=Go(e.method).toUpperCase(),n={headers:dp(e.headers),method:r};return r!=="GET"&&r!=="HEAD"&&(n.body=e.body),new globalThis.Request(t,n)}function dp(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function Ji(e){let t;try{t=await e.body.text()}catch{return new f(new En)}return new c(e.withFields({body:t}))}var jn=class extends a{constructor(t){super(),this[0]=t}},En=class extends a{};function sl(e){let r=il(e),n=rl(r);return _n(n,i=>fn(new c(nl(i))))}var Ki=class extends a{constructor(t){super(),this[0]=t}},Tn=class extends a{constructor(t){super(),this[0]=t}},Sn=class extends a{},Vi=class extends a{},ir=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},Yi=class extends a{},Zi=class extends a{constructor(t){super(),this.run=t}};function $p(e,t,r){let n=sl(e),i=_n(n,Ji),s=dn(i,l=>{if(l.isOk()){let p=l[0];return t.run(new c(p))}else return t.run(new f(new Sn))}),o=Fi(s,l=>t.run(new f(new Sn)));Co(o,r)}function ol(e,t){return W(r=>$p(e,t,r))}function mp(e){if(e instanceof ve&&200<=e.status&&e.status<=299){let t=e.status,r=e.body;return new c(r)}else{if(e instanceof ve&&e.status===401)return new f(new Yi);if(e instanceof ve&&e.status===404)return new f(new Vi);if(e instanceof ve&&e.status===500){let t=e.body;return new f(new Ki(t))}else{let t=e.status,r=e.body;return new f(new ir(t,r))}}}function ll(e){return new Zi(t=>{let n=C(t,mp);return e(n)})}var Xi=class extends a{constructor(t,r,n,i,s,o,l){super(),this.id=t,this.title=r,this.artists=n,this.album=i,this.album_cover=s,this.source=o,this.preview_url=l}},Cn=class extends a{constructor(t){super(),this.url=t}},Qi=class extends a{constructor(t){super(),this.url=t}};function wp(e){if(e instanceof Cn){let t=e.url;return Ne(u([["source",F("youtube")],["url",F(t)]]))}else{let t=e.url;return Ne(u([["source",F("spotify")],["url",F(t)]]))}}function qn(e){return Ne(u([["id",F(e.id)],["title",F(e.title)],["artists",(()=>{let t=e.artists;return ke(t,F)})()],["album",F(e.album)],["album_cover",F(e.album_cover)],["source",wp(e.source)],["preview_url",_o(e.preview_url,F)]]))}function xp(e){let t=(()=>{let r=e;return M("source",q)(r)})();if(t.isOk()&&t[0]==="youtube"){let r=e,n=M("url",q)(r);return T(n,i=>new Cn(i))}else if(t.isOk()&&t[0]==="spotify"){let r=e,n=M("url",q)(r);return T(n,i=>new Qi(i))}else if(t.isOk()){let r=t[0];return new f(u([new K("Wrong source name",r,u(["source"]))]))}else{let r=t[0];return new f(r)}}function Mn(e){let t=e;return Ns((r,n,i,s,o,l,p)=>new Xi(r,n,i,s,o,l,p),M("id",q),M("title",q),M("artists",ce(q)),M("album",q),M("album_cover",q),M("source",xp),M("preview_url",zs(q)))(t)}var es=class extends a{constructor(t,r,n){super(),this.id=t,this.name=r,this.songs=n}},sr=class extends a{constructor(t){super(),this.name=t}};function al(e){return Ne(u([["id",F(e.id)],["name",F(e.name)],["songs",ke(e.songs,qn)]]))}function pl(e){let t=e;return ai((r,n,i)=>new es(r,n,i),M("id",q),M("name",q),M("songs",ce(Mn)))(t)}function cl(e){return Ne(u([["name",F(e.name)]]))}function fl(e){let t=e;return si(r=>new sr(r),M("name",q))(t)}var ht=class extends a{constructor(t){super(),this.search=t}},wt=class extends a{constructor(t){super(),this.results=t}},xt=class extends a{constructor(t){super(),this.error=t}},oe=class extends a{constructor(t){super(),this.message=t}},gt=class extends a{constructor(t){super(),this.preview_url=t}},yt=class extends a{constructor(t){super(),this.playlists=t}},bt=class extends a{constructor(t){super(),this.id=t}},Ze=class extends a{constructor(t){super(),this.id=t}},kt=class extends a{constructor(t){super(),this.name=t}},or=class extends a{constructor(t){super(),this.playlist=t}},At=class extends a{constructor(t){super(),this.playlist=t}},lr=class extends a{constructor(t){super(),this.playlist=t}},ur=class extends a{constructor(t){super(),this.id=t}};function _l(){return u([Po(u([w("text-lg mb-4 text-center")]),u([I("Search songs and create playlists that can be exported to Spotify, Youtube Music,...")])),Fo(u([bo("/login"),w("text-green-400 bg-zinc-700 hover:bg-zinc-600 rounded-md font-bold flex gap-2 py-2 px-4")]),u([$t(u([at("https://storage.googleapis.com/pr-newsroom-wp/1/2023/05/Spotify_Primary_Logo_RGB_Green.png"),w("h-6")])),I("Login to Spotify")]))])}function $l(e,t){return B(u([w("bg-zinc-800 min-w-screen min-h-screen text-pink-100 p-4 flex flex-nowrap items-stretch")]),u([No(u([w("w-1/8 md:w-1/6 lg:w-1/4 max-w-lg bg-zinc-900 rounded-lg")]),t),B(u([w("w-3/4 md:w-2/3 lg:w-1/2 max-w-3xl flex-1 flex flex-col items-center py-8")]),m(mn(u([w("text-4xl font-bold mb-8")]),u([I("Playlist Maker")])),e))]))}function Ie(e,t){return go(e,t)}function kp(e){let t=dt("create-playlist-name");if(t.isOk()){let r=t[0],n=Gi(r);if(n.isOk()){let i=n[0];return new c(new kt(i))}else return new c(new oe("Couldn't get value of element"))}else return new c(new oe("Couldn't find element with id create-playlist-name"))}function ml(){return Do(u([Vt("create-playlist"),w("p-4 rounded-lg backdrop:bg-zinc-900 backdrop:opacity-80")]),u([mn(u([w("text-2xl font-bold mb-4")]),u([I("Create a new playlist")])),B(u([w("flex flex-col gap-4")]),u([Io(u([w("flex gap-2 items-center")]),u([_t(u([]),u([I("Playlist name")])),xn(u([Vt("create-playlist-name"),yo("Playlist name..."),w("p-2 rounded-md bg-zinc-100 focus:bg-zinc-200")]))])),B(u([w("flex justify-end")]),u([Ke(u([w("p-2 bg-zinc-100"),Ie("click",e=>new c(new Ze("create-playlist")))]),u([I("Close")])),Ke(u([w("p-2 bg-green-500 text-zinc-100"),Ie("click",kp)]),u([I("Create")]))]))]))]))}function hl(e){return u([B(u([w("p-2 flex flex-col gap-2 items-stretch")]),u([Qr(t=>wn(u([w("flex flex-col items-stretch")]),t),E(e,t=>{let r=hn(u([]),u([I(t[1].name)]));return[t[0],r]})),Ke(u([w("text-center font-bold border border-zinc-100 bg-zinc-900 hover:bg-zinc-800/50 rounded-md py-2 px-4"),Ie("click",t=>new c(new bt("create-playlist")))]),u([I("+ Create playlist")]))])),ml()])}function Fp(e,t){return r=>N(ce(Ir)(r),n=>{if(e>=0){let o=Ct(n,e),l=Tt(o),p=Xn(l,u([new K("A list with at least"+j(e+1)+"elements","A list with"+j(Kn(n))+"elements",u([j(e)]))]));return C(p,t)}else return new f(u([new K("An 'index' decoder with a non-negative index",j(e),u([]))]))})}function Ip(e,t){return Dr(u([ui(e,t),M(j(e),t),Fp(e,t)]))}function rs(e,t,r){if(e.hasLength(0))return t(r);{let n=e.head,i=e.tail,s=Te(n);if(s.isOk()){let o=s[0],l=r,p=Ip(o,Ir)(l);return C(p,d=>rs(i,t,d))}else{let o=r,l=M(n,Ir)(o);return C(l,p=>rs(i,t,p))}}}function wl(e,t){return r=>rs(e,t,r)}function xl(){return B(u([w("mt-8 w-8 h-8 animate-spin rounded-full border-2 border-t-zinc-800 border-x-zinc-800/50 border-b-zinc-800/50")]),u([]))}function Bp(e){let t=e,r=wl(u(["target","previousElementSibling","value"]),q)(t);return T(r,n=>new ht(n))}function Hp(e){let t=e.preview_url;if(t instanceof $){let r=t[0];return B(u([w("group relative")]),u([$t(u([at(e.album_cover),w("w-16 h-16 rounded-sm"),Ie("click",n=>new c(new gt(r)))])),B(u([w("absolute w-full h-full top-0 left-0 group-hover:opacity-100 bg-zinc-100/50 p-2 opacity-0 transition-opacity duration-300 pointer-events-none")]),u([$t(u([at("https://www.svgrepo.com/download/524827/play-circle.svg")]))]))]))}else return B(u([]),u([$t(u([at(e.album_cover),w("w-16 h-16 rounded-sm")]))]))}function Rp(e){return B(u([w("flex items-center gap-4 py-4 px-8 bg-zinc-700/50 hover:bg-zinc-700/80")]),u([Hp(e),B(u([w("flex flex-col flex-1")]),u([_t(u([w("font-semibold")]),u([I(e.title)])),_t(u([w("text-sm text-zinc-100/70")]),u([I((()=>{let t=e.artists;return Q(t," - ")})())])),_t(u([w("text-sm text-zinc-100/70")]),u([I(e.album)]))]))]))}function Up(e){return Qr(t=>wn(u([w("rounded-lg overflow-clip mt-8 w-full")]),t),E(e,t=>{let r=hn(u([]),u([Rp(t)]));return[t.id,r]}))}function gl(e,t){return u([B(u([w("rounded-md overflow-clip flex items-stretch")]),u([xn(u([w("py-2 px-4 bg-zinc-700/30 hover:bg-zinc-700/70 focus:bg-zinc-600/80"),Vt("search-songs")])),Ke(u([w("bg-zinc-700 hover:bg-zinc-600 py-2 px-4"),Ie("click",Bp)]),u([I("Search")]))])),e?xl():Up(t)])}var De=class extends a{constructor(t){super(),this.msg=t}},zn=class extends a{constructor(t){super(),this.err=t}};var ar=class extends a{},Nn=class extends a{},Lt=class extends a{},Pn=class extends a{constructor(t,r){super(),this.encoder=t,this.decoder=r}},Fn=class extends a{constructor(t,r){super(),this.btype=t,this.converter=r}};function is(){return new Fn(new ar,new Pn(e=>Qn(),e=>new c(void 0)))}function vt(e,t){return new Fn(new Lt,new Pn(r=>{let i=e(r);return fo(i)},r=>{let n=Yr(r,t);return pe(n,i=>new zn(i))}))}function ss(e,t){let r=t;return e.converter.encoder(r)}function yl(e,t){let r=t;return e.converter.decoder(r)}function bl(e){return e.btype}var os=class extends a{};var ls=class extends a{constructor(t,r){super(),this.encoder=t,this.decoder=r}},us=class extends a{constructor(t,r){super(),this.ptype=t,this.converter=r}};function Qe(e){return new us(new os,new ls(t=>e,t=>be(k(t,e),new c(void 0),()=>new f(void 0))))}function kl(e,t){let r=t;return e.converter.encoder(r)}function Al(e){return e.ptype}var pr=class extends a{},cr=class extends a{},fr=class extends a{constructor(t,r){super(),this.encoder=t,this.decoder=r}},Gn=class extends a{constructor(t,r){super(),this.qtype=t,this.converter=r}};function Ll(){return new Gn(new pr,new fr(e=>u([]),e=>new c(void 0)))}function vl(e){return new Gn(new cr,e)}function Ol(e,t){let r=t;return e.converter.encoder(r)}function jl(e){return e.qtype}var et=class extends a{constructor(t,r,n,i,s){super(),this.method=t,this.path=r,this.query=n,this.req_body=i,this.res_body=s}};function dr(){return new et(new ne,Qe(u([])),Ll(),is(),is())}function _r(e,t){return e.withFields({method:t})}function $r(e,t){return new et(e.method,t,e.query,e.req_body,e.res_body)}function El(e,t){return new et(e.method,e.path,t,e.req_body,e.res_body)}function Tl(e,t){return new et(e.method,e.path,e.query,t,e.res_body)}function mr(e,t){return new et(e.method,e.path,e.query,e.req_body,t)}var hr=class extends a{constructor(t,r,n){super(),this.scheme=t,this.host=r,this.port=n}},ps=class extends a{constructor(t,r,n,i,s,o,l){super(),this.route=t,this.scheme=r,this.host=n,this.port=i,this.path_opt=s,this.query_opt=o,this.body_opt=l}};function Cl(){return new hr(new Le,"localhost",80)}function ql(e,t){return t instanceof Le?new hr(new Le,e.host,80):new hr(new Ye,e.host,443)}function Ml(e,t){return e.withFields({host:t})}function zl(e,t){return e.withFields({port:t})}function wr(e,t){return new ps(t,e.scheme,e.host,e.port,new _,new _,new _)}function xr(e,t){return e.withFields({path_opt:new $(t)})}function Nl(e,t){return e.withFields({query_opt:new $(t)})}function Pl(e,t){return e.withFields({body_opt:new $(t)})}function Jp(e,t,r,n){let i=(()=>{let o=t.route.path;return Al(o)})(),s=t.path_opt;if(s instanceof _)return r("Path option is missing, please call with_path before send");{let o=s[0];return n(Qo(e,(()=>{let p=t.route.path,d=kl(p,o);return Q(d,"/")})()))}}function Kp(e,t,r,n){let i=(()=>{let o=t.route.query;return jl(o)})(),s=t.query_opt;if(i instanceof cr&&s instanceof _)return r("Query option is missing, please call with_query before send");if(i instanceof pr)return n(e);{let o=s[0];return n(Ko(e,(()=>{let p=t.route.query;return Ol(p,o)})()))}}function Vp(e,t,r,n){let i=(()=>{let o=t.route.req_body;return bl(o)})(),s=t.body_opt;if(i instanceof Lt&&s instanceof _)return r("Body option is missing, please call with_body before send");if(i instanceof Nn&&s instanceof _)return r("Body option is missing, please call with_body before send");if(i instanceof ar)return n(e);if(i instanceof Lt&&s instanceof $){let o=s[0];return n((()=>{let p=On(e,(()=>{let d=t.route.req_body,h=ss(d,o);return X(h)})());return Ui(p,"Content-Type","application/json")})())}else{let o=s[0];return n(On(e,(()=>{let p=t.route.req_body,d=ss(p,o);return X(d)})()))}}function Yp(e){if(e instanceof De){let t=e.msg;return new ir(500,t)}else{let t=e.err;return new Tn(t)}}function Bn(e,t,r){let n=(()=>{let i=Vo();return Wi(i,e.route.method)})();return Jp(n,e,r,i=>Kp(i,e,r,s=>Vp(s,e,r,o=>{let p=(()=>{let h=Yo(o,e.scheme),x=Zo(h,e.host);return Xo(x,e.port)})();return ol(p,ll(d=>{let x=C(d,y=>{let L=e.route.res_body,Y=yl(L,y);return pe(Y,Yp)});return t(x)}))})))}var gr=class extends a{constructor(t,r,n){super(),this.root_path=t,this.base=r,this.upsert=n}};function Fl(){return new gr(u([]),new _,new _)}function Il(e,t){return e.withFields({root_path:t})}function Dl(e,t,r){return new gr(e.root_path,new $([t,r]),e.upsert)}function Gl(e,t,r){return new gr(e.root_path,e.base,new $([t,r]))}function Bl(e){let t=e.upsert,r=e.base;if(t instanceof _)return new f(new De("No upsert type provided, make sure you called with_upsert_type"));if(r instanceof _)return new f(new De("No base type provided, make sure you called with_base_type"));{let n=t[0],i=r[0],s=dr(),o=_r(s,new Ve),l=$r(o,Qe(e.root_path)),p=Tl(l,vt(n[0],n[1])),d=mr(p,vt(i[0],i[1]));return new c(d)}}function Hl(e){let t=e.base;if(t instanceof _)return new f(new De("No base type provided, make sure you called with_base_type"));{let r=t[0],n=dr(),i=_r(n,new ne),s=$r(i,Qe(e.root_path)),o=mr(s,vt(l=>ke(l,r[0]),ce(r[1])));return new c(o)}}function Rl(){let e=Fl(),t=Il(e,u(["playlists"])),r=Dl(t,al,pl);return Gl(r,cl,fl)}function Ul(){let e=Rl();return Hl(e)}function Wl(){let e=Rl();return Bl(e)}function yr(){let e=Cl(),t=ql(e,new Le),r=Ml(t,"localhost");return zl(r,2345)}function cs(e){!e||!(e instanceof HTMLDialogElement)||e.showModal()}function fs(e){!e||!(e instanceof HTMLDialogElement)||e.close()}function ds(e,t){return Bn(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return new xt(i)}},n=>W(i=>i(new oe(n))))}function _s(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return W(n=>Ri(r))}}function Vl(){return _s(Ul(),e=>{let t=yr(),r=wr(t,e),n=xr(r,void 0);return ds(n,i=>new yt(i))})}function Yl(e){return _s(Wl(),t=>{let r=yr(),n=wr(r,t),i=xr(n,void 0),s=Pl(i,new sr(e));return ds(s,o=>new At(o))})}var br=class extends a{constructor(t,r){super(),this.search=t,this.token=r}};function ec(e){return u([["q",e.search],["token",e.token]])}function tc(e){return N(ge(e,"q"),t=>N(ge(e,"token"),r=>new c(new br(t,r))))}function Zl(){let e=dr(),t=_r(e,new ne),r=$r(t,Qe(u(["songs","search"]))),n=El(r,vl(new fr(ec,tc)));return mr(n,vt(i=>ke(i,qn),ce(Mn)))}function Xl(e,t){let r=yr(),n=wr(r,Zl()),i=xr(n,void 0),s=Nl(i,new br(e,t));return Bn(s,o=>{if(o.isOk()){let l=o[0];return new wt(l)}else{let l=o[0];return new xt(l)}},o=>W(l=>l(new oe(o))))}var kr=class extends a{constructor(t,r,n,i,s){super(),this.token=t,this.last_search=r,this.searching=n,this.results=i,this.playlists=s}};function ic(e){let t=(()=>{let r=Wr(Bi()),n=C(r,s=>Li((()=>{let o=s.query;return Ee(o,"")})())),i=C(n,s=>ge(s,"token"));return Be(i,"")})();return[new kr(t,"",!1,u([]),J()),Vl()]}function sc(e,t){if(t instanceof ht){let r=t.search;return[e.withFields({last_search:r,searching:!0}),Xl(r,e.token)]}else if(t instanceof wt){let r=t.results;return[e.withFields({searching:!1,results:r}),We()]}else if(t instanceof yt){let r=t.playlists;return[e.withFields({playlists:Gr(E(r,i=>[i.id,i]))}),We()]}else if(t instanceof gt){let r=t.preview_url;return[e,W(n=>{Hi(r);let i=Ii(r);Di(i)})]}else if(t instanceof bt){let r=t.id;return[e,W(n=>{let i=dt(r),s=T(i,cs);return Be(s,void 0)})]}else if(t instanceof kt){let r=t.name;return[e,Yl(r)]}else if(t instanceof At){let r=t.playlist;return[e.withFields({playlists:(()=>{let n=e.playlists;return ie(n,r.id,r)})()}),W(n=>n(new Ze("create-playlist")))]}else if(t instanceof lr){let r=t.playlist;return[e.withFields({playlists:(()=>{let n=e.playlists;return ie(n,r.id,r)})()}),We()]}else if(t instanceof or){let r=t.playlist;return[e.withFields({playlists:(()=>{let n=e.playlists;return ie(n,r.id,r)})()}),We()]}else if(t instanceof ur){let r=t.id;return[e.withFields({playlists:(()=>{let n=e.playlists;return io(n,u([r]))})()}),We()]}else if(t instanceof Ze){let r=t.id;return[e,W(n=>{let i=dt(r),s=T(i,fs);return Be(s,void 0)})]}else if(t instanceof oe){let r=t.message;return[e,W(n=>$n(r))]}else{let r=t.error;return[e,W(n=>$n(r))]}}function oc(e){let t=(()=>{if(e instanceof kr&&e.token===""){let n=e.token;return _l()}else{let n=e.searching,i=e.results;return gl(n,i)}})(),r=hl((()=>{let n=e.playlists;return it(n)})());return $l(t,r)}function Ql(){let e=Eo(ic,sc,oc),t=To(e,"#app",void 0);if(!t.isOk())throw he("assignment_no_match","client",27,"main","Assignment pattern did not match",{value:t})}Ql();
