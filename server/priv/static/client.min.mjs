var p=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},S=class{static fromArray(t,r){let n=r||new Wt;for(let i=t.length-1;i>=0;--i)n=new st(t[i],n);return n}[Symbol.iterator](){return new un(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}};function m(e,t){return new st(e,t)}function u(e,t){return S.fromArray(e,t)}var un=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof Wt)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},Wt=class extends S{},st=class extends S{constructor(t,r){super(),this.head=t,this.tail=r}},Jt=class e{constructor(t){if(!(t instanceof Uint8Array))throw"BitArray can only be constructed from a Uint8Array";this.buffer=t}get length(){return this.buffer.length}byteAt(t){return this.buffer[t]}floatFromSlice(t,r,n){return Xo(this.buffer,t,r,n)}intFromSlice(t,r,n,i){return Zo(this.buffer,t,r,n,i)}binaryFromSlice(t,r){return new e(this.buffer.slice(t,r))}sliceAfter(t){return new e(this.buffer.slice(t))}};function Zo(e,t,r,n,i){let s=0;if(n)for(let o=t;o<r;o++)s=s*256+e[o];else for(let o=r-1;o>=t;o--)s=s*256+e[o];if(i){let l=2**((r-t)*8-1);s>=l&&(s-=l*2)}return s}function Xo(e,t,r,n){let i=new DataView(e.buffer),s=r-t;if(s===8)return i.getFloat64(t,!n);if(s===4)return i.getFloat32(t,!n);{let o=`Sized floats must be 32-bit or 64-bit on JavaScript, got size of ${s*8} bits`;throw new globalThis.Error(o)}}var Ie=class e extends p{static isResult(t){return t instanceof e}},c=class extends Ie{constructor(t){super(),this[0]=t}isOk(){return!0}},f=class extends Ie{constructor(t){super(),this[0]=t}isOk(){return!1}};function b(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!ki(n)||!ki(i)||!ll(n,i)||tl(n,i)||rl(n,i)||nl(n,i)||il(n,i)||sl(n,i)||ol(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[l,a]=Qo(n);for(let d of l(n))r.push(a(n,d),a(i,d))}return!0}function Qo(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function tl(e,t){return e instanceof Date&&(e>t||e<t)}function rl(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function nl(e,t){return Array.isArray(e)&&e.length!==t.length}function il(e,t){return e instanceof Map&&e.size!==t.size}function sl(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function ol(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function ki(e){return typeof e=="object"&&e!==null}function ll(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function ye(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.fn=n;for(let l in s)o[l]=s[l];return o}var $=class extends p{constructor(t){super(),this[0]=t}},_=class extends p{};function Ge(e,t){if(e instanceof $){let r=e[0];return new c(r)}else return new f(t)}function ot(e){if(e.isOk()){let t=e[0];return new $(t)}else return new _}function be(e,t){return e instanceof $?e[0]:t}function Kt(e,t){if(e instanceof $){let r=e[0];return new $(t(r))}else return new _}var De=class extends p{constructor(t,r){super(),this.content=t,this.submatches=r}},Yt=class extends p{constructor(t,r){super(),this.error=t,this.byte_index=r}},Vt=class extends p{constructor(t,r){super(),this.case_insensitive=t,this.multi_line=r}};function Ai(e,t){return Li(e,t)}function Zt(e,t){return Oi(e,t)}function lt(e){return e>=0?e:e*-1}function ke(e){return ji(e)}function j(e){return Ei(e)}function C(e,t){if(e.isOk()){let r=e[0];return new c(t(r))}else{let r=e[0];return new f(r)}}function re(e,t){if(e.isOk()){let r=e[0];return new c(r)}else{let r=e[0];return new f(t(r))}}function q(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new f(r)}}function T(e,t){return q(e,t)}function ut(e,t){return e.isOk()?e[0]:t}function Ti(e){return re(e,t=>{})}function pn(e,t){if(e.isOk()){let r=e[0];return new c(r)}else return new f(t)}function fn(){return ft(u([]))}function Oe(e){return ft(e)}function dn(e){return ft(e)}function ct(e){return e}function J(e){return e}function $n(e){return zi(e)}function je(e){return _n(e)}function _t(e,t){return Pi(e,t)}function $t(e){let r=Oe(e);return J(r)}function K(e,t){return Ni(e,t)}function mt(e){return Mi(e)}function Ci(e,t,r){let i=tr(e),s=ht(i,t),o=mn(s,r);return $t(o)}function qi(e,t,r){if(r<0)return"";if(t<0){let s=$n(e)+t;return s<0?"":Ci(e,s,r)}else return Ci(e,t,r)}function nr(e,t){return t<0?e:qi(e,t,$n(e)-t)}var B=class extends p{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}};function ir(e){return new c(e)}function wt(e){return yn(e)}function Gi(e){return Hi(e)}function ml(e){return Ji(e)}function Di(e){return t=>Ki(t,e)}function Ii(e,t){let r=e===1?"":"s",n=(()=>{let i=u(["Tuple of at least ",j(e)," element",r]),s=Oe(i),o=J(s);return new B(o,wt(t),u([]))})();return new f(u([n]))}function sr(e){return t=>{if(e.hasLength(0))return new f(u([new B("another type",wt(t),u([]))]));{let r=e.head,n=e.tail,i=r(t);if(i.isOk()){let s=i[0];return new c(s)}else return sr(n)(t)}}}function Te(e){return e.isOk()?u([]):e[0]}function xn(e,t){let r=t,n=sr(u([F,s=>C(Gi(s),j)])),i=(()=>{let s=n(r);if(s.isOk())return s[0];{let o=u(["<",wt(r),">"]),l=Oe(o);return J(l)}})();return e.withFields({path:m(i,e.path)})}function Be(e){return t=>q(ml(t),r=>{let i=pt(r,e);return gn(i,s=>xn(s,"*"))})}function gn(e,t){return re(e,r=>P(r,t))}function F(e){return Ui(e)}function I(e,t){return r=>{let n=new B("field","nothing",u([]));return q(Yi(r,e),i=>{let o=Ge(i,u([n])),l=q(o,t);return gn(l,a=>xn(a,e))})}}function Bi(e,t){return r=>q(Wi(r),n=>{let i=dt(n);return q(e>=0?e<i?wn(n,e):Ii(e+1,r):lt(e)<=i?wn(n,i+e):Ii(lt(e),r),s=>{let o=t(s);return gn(o,l=>xn(l,e))})})}function Ri(e,t,r,n,i,s,o,l){return a=>{let d=t(a),h=r(a),w=n(a),g=i(a),L=s(a),H=o(a),xe=l(a);if(d.isOk()&&h.isOk()&&w.isOk()&&g.isOk()&&L.isOk()&&H.isOk()&&xe.isOk()){let ge=d[0],pe=h[0],x=w[0],y=g[0],E=L[0],z=H[0],ce=xe[0];return new c(e(ge,pe,x,y,E,z,ce))}else{let ge=d,pe=h,x=w,y=g,E=L,z=H,ce=xe;return new f(Vi(u([Te(ge),Te(pe),Te(x),Te(y),Te(E),Te(z),Te(ce)])))}}}var Zi=new WeakMap,bn=new DataView(new ArrayBuffer(8)),kn=0;function An(e){let t=Zi.get(e);if(t!==void 0)return t;let r=kn++;return kn===2147483647&&(kn=0),Zi.set(e,r),r}function Ln(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function vn(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Xi(e){bn.setFloat64(0,e);let t=bn.getInt32(0),r=bn.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function wl(e){return vn(e.toString())}function xl(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return An(e);if(e instanceof Date)return Xi(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+Y(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+Y(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+Ln(Y(n),Y(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+Ln(Y(o),vn(s))|0}}return r}function Y(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Xi(e);case"string":return vn(e);case"bigint":return wl(e);case"object":return xl(e);case"symbol":return An(e);case"function":return An(e);default:return 0}}var oe=5,jn=Math.pow(2,oe),gl=jn-1,yl=jn/2,bl=jn/4,G=0,se=1,R=2,Se=3,En={type:R,bitmap:0,array:[]};function xt(e,t){return e>>>t&gl}function ur(e,t){return 1<<xt(e,t)}function kl(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Tn(e,t){return kl(e&t-1)}function V(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function Al(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function On(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Qi(e,t,r,n,i,s){let o=Y(t);if(o===n)return{type:Se,hash:o,array:[{type:G,k:t,v:r},{type:G,k:i,v:s}]};let l={val:!1};return gt(Sn(En,e,o,t,r,l),e,n,i,s,l)}function gt(e,t,r,n,i,s){switch(e.type){case se:return Ll(e,t,r,n,i,s);case R:return Sn(e,t,r,n,i,s);case Se:return Ol(e,t,r,n,i,s)}}function Ll(e,t,r,n,i,s){let o=xt(r,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:se,size:e.size+1,array:V(e.array,o,{type:G,k:n,v:i})};if(l.type===G)return b(n,l.k)?i===l.v?e:{type:se,size:e.size,array:V(e.array,o,{type:G,k:n,v:i})}:(s.val=!0,{type:se,size:e.size,array:V(e.array,o,Qi(t+oe,l.k,l.v,r,n,i))});let a=gt(l,t+oe,r,n,i,s);return a===l?e:{type:se,size:e.size,array:V(e.array,o,a)}}function Sn(e,t,r,n,i,s){let o=ur(r,t),l=Tn(e.bitmap,o);if(e.bitmap&o){let a=e.array[l];if(a.type!==G){let h=gt(a,t+oe,r,n,i,s);return h===a?e:{type:R,bitmap:e.bitmap,array:V(e.array,l,h)}}let d=a.k;return b(n,d)?i===a.v?e:{type:R,bitmap:e.bitmap,array:V(e.array,l,{type:G,k:n,v:i})}:(s.val=!0,{type:R,bitmap:e.bitmap,array:V(e.array,l,Qi(t+oe,d,a.v,r,n,i))})}else{let a=e.array.length;if(a>=yl){let d=new Array(32),h=xt(r,t);d[h]=Sn(En,t+oe,r,n,i,s);let w=0,g=e.bitmap;for(let L=0;L<32;L++){if(g&1){let H=e.array[w++];d[L]=H}g=g>>>1}return{type:se,size:a+1,array:d}}else{let d=Al(e.array,l,{type:G,k:n,v:i});return s.val=!0,{type:R,bitmap:e.bitmap|o,array:d}}}}function Ol(e,t,r,n,i,s){if(r===e.hash){let o=Cn(e,n);if(o!==-1)return e.array[o].v===i?e:{type:Se,hash:r,array:V(e.array,o,{type:G,k:n,v:i})};let l=e.array.length;return s.val=!0,{type:Se,hash:r,array:V(e.array,l,{type:G,k:n,v:i})}}return gt({type:R,bitmap:ur(e.hash,t),array:[e]},t,r,n,i,s)}function Cn(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(b(t,e.array[n].k))return n;return-1}function lr(e,t,r,n){switch(e.type){case se:return vl(e,t,r,n);case R:return jl(e,t,r,n);case Se:return El(e,n)}}function vl(e,t,r,n){let i=xt(r,t),s=e.array[i];if(s!==void 0){if(s.type!==G)return lr(s,t+oe,r,n);if(b(n,s.k))return s}}function jl(e,t,r,n){let i=ur(r,t);if(!(e.bitmap&i))return;let s=Tn(e.bitmap,i),o=e.array[s];if(o.type!==G)return lr(o,t+oe,r,n);if(b(n,o.k))return o}function El(e,t){let r=Cn(e,t);if(!(r<0))return e.array[r]}function qn(e,t,r,n){switch(e.type){case se:return Tl(e,t,r,n);case R:return Sl(e,t,r,n);case Se:return Cl(e,n)}}function Tl(e,t,r,n){let i=xt(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===G){if(!b(s.k,n))return e}else if(o=qn(s,t+oe,r,n),o===s)return e;if(o===void 0){if(e.size<=bl){let l=e.array,a=new Array(e.size-1),d=0,h=0,w=0;for(;d<i;){let g=l[d];g!==void 0&&(a[h]=g,w|=1<<d,++h),++d}for(++d;d<l.length;){let g=l[d];g!==void 0&&(a[h]=g,w|=1<<d,++h),++d}return{type:R,bitmap:w,array:a}}return{type:se,size:e.size-1,array:V(e.array,i,o)}}return{type:se,size:e.size,array:V(e.array,i,o)}}function Sl(e,t,r,n){let i=ur(r,t);if(!(e.bitmap&i))return e;let s=Tn(e.bitmap,i),o=e.array[s];if(o.type!==G){let l=qn(o,t+oe,r,n);return l===o?e:l!==void 0?{type:R,bitmap:e.bitmap,array:V(e.array,s,l)}:e.bitmap===i?void 0:{type:R,bitmap:e.bitmap^i,array:On(e.array,s)}}return b(n,o.k)?e.bitmap===i?void 0:{type:R,bitmap:e.bitmap^i,array:On(e.array,s)}:e}function Cl(e,t){let r=Cn(e,t);if(r<0)return e;if(e.array.length!==1)return{type:Se,hash:e.hash,array:On(e.array,r)}}function es(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===G){t(s.v,s.k);continue}es(s,t)}}}var Ce=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=lr(this.root,0,Y(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?En:this.root,s=gt(i,0,Y(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=qn(this.root,0,Y(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:lr(this.root,0,Y(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){es(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+Ln(Y(r),Y(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;let r=!0;return this.forEach((n,i)=>{r=r&&b(t.get(i,!n),n)}),r}};var yt=void 0,ts={};function ji(e){return/^[-+]?(\d+)$/.test(e)?new c(parseInt(e)):new f(yt)}function Ei(e){return e.toString()}function zi(e){if(e==="")return 0;let t=zn(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function tr(e){let t=zn(e);return t?S.fromArray(Array.from(t).map(r=>r.segment)):S.fromArray(e.match(/./gsu))}function zn(e){if(globalThis.Intl&&Intl.Segmenter)return new Intl.Segmenter().segment(e)[Symbol.iterator]()}function Mi(e){let t,r=zn(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new c([t,e.slice(t.length)]):new f(yt)}function _n(e){return e.toLowerCase()}function Ni(e,t){let r=e[Symbol.iterator](),n=r.next().value||"",i=r.next();for(;!i.done;)n=n+t+i.value,i=r.next();return n}function ft(e){let t="";for(let r of e)t=t+r;return t}function dt(e){return e.length}function Pi(e,t){return e.startsWith(t)}var ss=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),Qc=new RegExp(`^([${ss}]*)`,"g"),ef=new RegExp(`([${ss}]*)$`,"g");function Li(e,t){try{let r="gu";return t.case_insensitive&&(r+="i"),t.multi_line&&(r+="m"),new c(new RegExp(e,r))}catch(r){let n=(r.columnNumber||0)|0;return new f(new Yt(r.message,n))}}function Oi(e,t){let r=Array.from(t.matchAll(e)).map(n=>{let i=n[0],s=[];for(let o=n.length-1;o>0;o--){if(n[o]){s[o-1]=new $(n[o]);continue}s.length>0&&(s[o-1]=new _)}return new De(i,S.fromArray(s))});return S.fromArray(r)}function os(){return Ce.new()}function or(e){return S.fromArray(e.entries())}function ls(e,t){let r=e.get(t,ts);return r===ts?new f(yt):new c(r)}function us(e,t,r){return r.set(e,t)}function rs(e){return decodeURIComponent((e||"").replace("+"," "))}function as(e){return encodeURIComponent(e).replace("%2B","+")}function ps(e){try{let t=[];for(let r of e.split("&")){let[n,i]=r.split("=");if(!n)continue;let s=rs(n),o=rs(i);t.push([s,o])}return new c(S.fromArray(t))}catch{return new f(yt)}}function yn(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Ie)return"Result";if(e instanceof S)return"List";if(e instanceof Jt)return"BitArray";if(e instanceof Ce)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function bt(e,t){return ql(e,yn(t))}function ql(e,t){return new f(S.fromArray([new B(e,t,S.fromArray([]))]))}function Ui(e){return typeof e=="string"?new c(e):bt("String",e)}function Hi(e){return Number.isInteger(e)?new c(e):bt("Int",e)}function Wi(e){return Array.isArray(e)?new c(e):bt("Tuple",e)}function wn(e,t){return t>=0&&e.length>t?new c(e[t]):new f(yt)}function Ji(e){return Array.isArray(e)?new c(S.fromArray(e)):e instanceof S?new c(e):bt("List",e)}function Ki(e,t){if(e==null||e instanceof _)return new c(new _);e instanceof $&&(e=e[0]);let r=t(e);return r.isOk()?new c(new $(r[0])):r}function Yi(e,t){let r=()=>bt("Dict",e);if(e instanceof Ce||e instanceof WeakMap||e instanceof Map){let n=ls(e,t);return new c(n.isOk()?new $(n[0]):new _)}else return e===null?r():Object.getPrototypeOf(e)==Object.prototype?ns(e,t,()=>new c(new _)):ns(e,t,r)}function ns(e,t,r){try{return t in e?new c(new $(e[t])):r()}catch{return r()}}function ne(){return os()}function Re(e,t,r){return us(t,r,e)}function Ml(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=m(i,n)}}}function Nl(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return Ml(n,u([]));{let i=r.head;e=r.tail,t=m(i[0],n)}}}function Pl(e){let t=or(e);return Nl(t,u([]))}function ar(e){return Pl(e)}function cs(e){return e[1]}function Il(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function Nn(e){return Il(e,0)}function Gl(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=m(i,n)}}}function M(e){return Gl(e,u([]))}function kt(e){if(e.hasLength(0))return new f(void 0);{let t=e.head;return new c(t)}}function Dl(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return M(s);{let o=n.head;e=n.tail,t=i,r=m(i(o),s)}}}function P(e,t){return Dl(e,t,u([]))}function Bl(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return M(l);{let a=i.head,d=i.tail,h=m(s(a,o),l);e=d,t=s,r=o+1,n=h}}}function cr(e,t){return Bl(e,t,0,u([]))}function Rl(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new c(M(s));{let o=n.head,l=n.tail,a=i(o);if(a.isOk()){let d=a[0];e=l,t=i,r=m(d,s)}else{let d=a[0];return new f(d)}}}}function pt(e,t){return Rl(e,t,u([]))}function ht(e,t){for(;;){let r=e,n=t;if(n<=0)return r;if(r.hasLength(0))return u([]);e=r.tail,t=n-1}}function Ul(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return M(s);if(n.hasLength(0))return M(s);{let l=n.head;e=n.tail,t=i-1,r=m(l,s)}}}function mn(e,t){return Ul(e,t,u([]))}function Hl(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=m(i,n)}}}function de(e,t){return Hl(M(e),t)}function Wl(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=m(i,n)}}}function Jl(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return M(n);{let i=r.head;e=r.tail,t=Wl(i,n)}}}function Vi(e){return Jl(e,u([]))}function qe(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function Kl(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return s;{let a=i.head;e=i.tail,t=o(s,a,l),r=o,n=l+1}}}function Pn(e,t,r){return Kl(e,t,r,0)}function Yl(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new f(void 0);{let i=r.head,s=r.tail,o=n(i);if(o.isOk()){let l=o[0];return new c(l)}else e=s,t=n}}}function Vl(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return M(s);{let o=n.head;e=n.tail,t=i,r=m(o,m(i,s))}}}function rr(e,t){if(e.hasLength(0))return e;if(e.hasLength(1))return e;{let r=e.head,n=e.tail;return Vl(n,t,u([r]))}}function Zl(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return s;e=n,t=i-1,r=m(n,s)}}function fs(e,t){return Zl(e,t,u([]))}function _e(e,t){return Yl(e,r=>{let n=r[0],i=r[1];return b(n,t)?new c(i):new f(void 0)})}function fr(e,t,r){if(e.hasLength(0))return u([[t,r]]);if(e.atLeastLength(1)&&b(e.head[0],t)){let n=e.head[0],i=e.tail;return m([t,r],i)}else{let n=e.head,i=e.tail;return m(n,fr(i,t,r))}}var At=class extends p{constructor(t,r,n,i,s,o,l){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=l}};function ds(e,t){let n=Ai(e,new Vt(!0,!1)),i=Ti(n),s=C(i,a=>Zt(a,t)),o=q(s,kt),l=C(o,a=>a.submatches);return ut(l,u([]))}function Xl(e){if(e instanceof _)return new _;{let t=e[0],r=mt(t);if(r.isOk()&&r[0][0]==="?"){let n=r[0][1];return new $(n)}else return new _}}function dr(e){return e instanceof $&&e[0]===""?new _:e instanceof _?new _:e}function Ql(e,t){for(;;){let r=e,n=t;if(n===0)return 0;if(r.hasLength(0))return n;e=r.tail,t=n-1}}function _s(e,t){return de(e,fs(new _,Ql(e,t)))}function eu(e){let t=be(e,"");if(t==="")return[new _,new _,new _];if(t==="//")return[new _,new $(""),new _];{let r=t,n=(()=>{let s=ds("^(//)?((.*)@)?(\\[[a-zA-Z0-9:.]*\\]|[^:]*)(:(\\d*))?",r);return _s(s,6)})();if(n.hasLength(6)){let i=n.tail.tail.head,s=n.tail.tail.tail.head,o=n.tail.tail.tail.tail.tail.head,l=dr(i),a=dr(s),d=(()=>{let w=be(o,""),g=ke(w);return ot(g)})();return[l,a,d]}else return[new _,new _,new _]}}function tu(e){let t="^(([a-z][a-z0-9\\+\\-\\.]*):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#.*)?",r=(()=>{let y=ds(t,e);return _s(y,8)})(),n=(()=>{if(r.hasLength(8)){let x=r.tail.head,y=r.tail.tail.head,E=r.tail.tail.tail.tail.head,z=r.tail.tail.tail.tail.tail.head,ce=r.tail.tail.tail.tail.tail.tail.tail.head;return[x,y,E,z,ce]}else return[new _,new _,new _,new _,new _]})(),i=n[0],s=n[1],o=n[2],l=n[3],a=n[4],d=dr(i),h=be(o,""),w=Xl(l),g=eu(s),L=g[0],H=g[1],xe=g[2],ge=(()=>{let y=Ge(a,void 0),E=q(y,mt),z=C(E,cs);return ot(z)})(),pe=(()=>{let y=dr(d);return Kt(y,je)})();return new c(new At(pe,L,H,xe,h,w,ge))}function _r(e){return tu(e)}function Fn(e){return ps(e)}function In(e){return as(e)}function $s(e){let t=(()=>{let l=e.fragment;if(l instanceof $){let a=l[0];return u(["#",a])}else return u([])})(),r=(()=>{let l=e.query;if(l instanceof $){let a=l[0];return m("?",m(a,t))}else return t})(),n=m(e.path,r),i=(()=>{let l=e.host,a=_t(e.path,"/");if(l instanceof $&&!a&&l[0]!==""){let d=l[0];return m("/",n)}else return n})(),s=(()=>{let l=e.host,a=e.port;if(l instanceof $&&a instanceof $){let d=a[0];return m(":",m(j(d),i))}else return i})(),o=(()=>{let l=e.scheme,a=e.userinfo,d=e.host;if(l instanceof $&&a instanceof $&&d instanceof $){let h=l[0],w=a[0],g=d[0];return m(h,m("://",m(w,m("@",m(g,s)))))}else if(l instanceof $&&a instanceof _&&d instanceof $){let h=l[0],w=d[0];return m(h,m("://",m(w,s)))}else if(l instanceof $&&a instanceof $&&d instanceof _){let h=l[0];return m(h,m(":",s))}else if(l instanceof $&&a instanceof _&&d instanceof _){let h=l[0];return m(h,m(":",s))}else if(l instanceof _&&a instanceof _&&d instanceof $){let h=d[0];return m("//",m(h,s))}else return s})();return $t(o)}function $e(e,t,r){return e?t:r()}function Dn(e){return JSON.stringify(e)}function ms(e){return Object.fromEntries(e)}function hs(e){return e.toArray()}function ws(){return null}function xs(e){try{let t=JSON.parse(e);return new c(t)}catch(t){return new f(nu(t,e))}}function nu(e,t){return iu(e)?new mr:su(e,t)}function iu(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function su(e,t){let r=[ou,lu,au,uu];for(let n of r){let i=n(e,t);if(i)return i}return new Ee("",0)}function ou(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=$r(r[1]);return new Ee(n,-1)}function lu(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=$r(r[1]),i=Number(r[2]);return new Ee(n,i)}function uu(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=pu(i,s,t),l=$r(t[o]);return new Ee(l,o)}function au(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=$r(r[2]);return new Ee(n,0)}function $r(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function pu(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var mr=class extends p{},Ee=class extends p{constructor(t,r){super(),this.byte=t,this.position=r}};var hr=class extends p{constructor(t){super(),this[0]=t}};function fu(e,t){return T(xs(e),r=>{let n=t(r);return re(n,i=>new hr(i))})}function wr(e,t){return fu(e,t)}function gs(e){return Dn(e)}function U(e){return e}function du(){return ws()}function ys(e,t){if(e instanceof $){let r=e[0];return t(r)}else return du()}function Ot(e){return ms(e)}function Rn(e){return hs(e)}function vt(e,t){let n=P(e,t);return Rn(n)}var xr=class extends p{constructor(t){super(),this.all=t}};function _u(e){return new xr(u([t=>e(t.dispatch,t.emit,t.select)]))}function me(e){return _u((t,r,n)=>e(t))}function Un(){return new xr(u([]))}var Ue=class extends p{constructor(t){super(),this.content=t}},O=class extends p{constructor(t,r,n,i,s,o,l){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=l}},Ne=class extends p{constructor(t){super(),this.subtree=t}},He=class extends p{constructor(t,r){super(),this.elements=t,this.key=r}},We=class extends p{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},Et=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}};function wu(e){if(e instanceof We)return new f(void 0);{let t=e[0],r=e[1],n=nr(t,2);return new c([n,r])}}function bs(e,t,r){return Pn(e,t,(n,i,s)=>{let o=r+"-"+j(s);return ks(i,n,o)})}function ks(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof Ue)return i;if(n instanceof Ne){let o=n.subtree;e=o(),t=i,r=s}else if(n instanceof O){let o=n.attrs,l=n.children,a=qe(o,i,(d,h)=>{let w=wu(h);if(w.isOk()){let g=w[0][0],L=w[0][1];return Re(d,s+"-"+g,L)}else return d});return bs(l,a,s)}else{let o=n.elements;return bs(o,i,s)}}}function As(e){return ks(e,ne(),"0")}function gr(e,t){return new We(e,t,!1)}function Os(e,t){return new Et("on"+e,t)}function A(e){return gr("class",e)}function vs(e){return gr("id",e)}function js(e){return gr("href",e)}function Je(e){return gr("src",e)}function Z(e,t,r){return e==="area"?new O("","",e,t,u([]),!1,!0):e==="base"?new O("","",e,t,u([]),!1,!0):e==="br"?new O("","",e,t,u([]),!1,!0):e==="col"?new O("","",e,t,u([]),!1,!0):e==="embed"?new O("","",e,t,u([]),!1,!0):e==="hr"?new O("","",e,t,u([]),!1,!0):e==="img"?new O("","",e,t,u([]),!1,!0):e==="input"?new O("","",e,t,u([]),!1,!0):e==="link"?new O("","",e,t,u([]),!1,!0):e==="meta"?new O("","",e,t,u([]),!1,!0):e==="param"?new O("","",e,t,u([]),!1,!0):e==="source"?new O("","",e,t,u([]),!1,!0):e==="track"?new O("","",e,t,u([]),!1,!0):e==="wbr"?new O("","",e,t,u([]),!1,!0):new O("","",e,t,r,!1,!1)}function yr(e,t){if(e instanceof O){let r=e.namespace,n=e.tag,i=e.attrs,s=e.children,o=e.self_closing,l=e.void;return new O(t,r,n,i,s,o,l)}else if(e instanceof Ne){let r=e.subtree;return new Ne(()=>yr(r(),t))}else if(e instanceof He){let n=e.elements,i=cr(n,(s,o)=>{if(s instanceof O){let l=s.key,a=l===""?t+"-"+j(o):t+"-"+l;return yr(s,a)}else return yr(s,t)});return new He(i,t)}else return e}function Es(e,t){return e(P(t,r=>{let n=r[0],i=r[1];return yr(i,n)}))}function Ts(e){return new Ue(e)}var Hn=class extends p{constructor(t){super(),this.dict=t}};function Cs(){return new Hn(ne())}var br=class extends p{constructor(t){super(),this[0]=t}},kr=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}},Ar=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}};function zs(e){return b(e.created,ne())&&b(e.removed,Cs())&&b(e.updated,ne())}var Lr=class extends p{constructor(t){super(),this[0]=t}},Or=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}},Tt=class extends p{constructor(t){super(),this[0]=t}},le=class extends p{constructor(t){super(),this[0]=t}},St=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}},vr=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}};var Ct=class extends p{},jr=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}},Er=class extends p{constructor(t){super(),this[0]=t}},Tr=class extends p{constructor(t){super(),this[0]=t}};function Wn(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:l}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let a=document.createTextNode(o.content);l.replaceChild(a,s),n??=a}else{let a=document.createTextNode(o.content);l.appendChild(a),n??=a}else if(o.tag!==void 0){let a=Lu({prev:s,next:o,dispatch:r,stack:i});s?s!==a&&l.replaceChild(a,s):l.appendChild(a),n??=a}else if(o.elements!==void 0)for(let a of Sr(o))i.unshift({prev:s,next:a,parent:l}),s=s?.nextSibling}return n}function Lu({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),l;if(qt.has(o))l=qt.get(o);else{let x=new Map;qt.set(o,x),l=x}let a=s?new Set(l.keys()):null,d=s?new Set(Array.from(e.attributes,x=>x.name)):null,h=null,w=null,g=null;if(s&&t.tag==="textarea"){let x=t.children[Symbol.iterator]().next().value?.content;x!==void 0&&(o.value=x)}for(let x of t.attrs){let y=x[0],E=x[1];if(x.as_property)o[y]!==E&&(o[y]=E),s&&d.delete(y);else if(y.startsWith("on")){let z=y.slice(2),ce=r(E,z==="input");l.has(z)||o.addEventListener(z,zt),l.set(z,ce),s&&a.delete(z)}else if(y.startsWith("data-lustre-on-")){let z=y.slice(15),ce=r(Ou);l.has(z)||o.addEventListener(z,zt),l.set(z,ce),o.setAttribute(y,E)}else y==="class"?h=h===null?E:h+" "+E:y==="style"?w=w===null?E:w+E:y==="dangerous-unescaped-html"?g=E:(o.getAttribute(y)!==E&&o.setAttribute(y,E),(y==="value"||y==="selected")&&(o[y]=E),s&&d.delete(y))}if(h!==null&&(o.setAttribute("class",h),s&&d.delete("class")),w!==null&&(o.setAttribute("style",w),s&&d.delete("style")),s){for(let x of d)o.removeAttribute(x);for(let x of a)l.delete(x),o.removeEventListener(x,zt)}if(t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(g!==null)return o.innerHTML=g,o;let L=o.firstChild,H=null,xe=null,ge=null,pe=Mt(t).next().value;if(s&&pe!==void 0&&pe.key!==void 0&&pe.key!==""){H=new Set,xe=Ms(e),ge=Ms(t);for(let x of Mt(t))L=vu(L,x,o,n,ge,xe,H)}else for(let x of Mt(t))n.unshift({prev:L,next:x,parent:o}),L=L?.nextSibling;for(;L;){let x=L.nextSibling;o.removeChild(L),L=x}return o}var qt=new WeakMap;function zt(e){let t=e.currentTarget;if(!qt.has(t)){t.removeEventListener(e.type,zt);return}let r=qt.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,zt);return}r.get(e.type)(e)}function Ou(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let l=o.split(".");for(let a=0,d=s,h=e;a<l.length;a++)a===l.length-1?d[l[a]]=h[l[a]]:(d[l[a]]??={},h=h[l[a]],d=d[l[a]]);return s},{data:n})}}function Ms(e){let t=new Map;if(e)for(let r of Mt(e)){let n=r?.key||r?.getAttribute?.("data-lustre-key");n&&t.set(n,r)}return t}function vu(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let a=e.nextSibling;r.removeChild(e),e=a}if(s.size===0){for(let a of Mt(t))n.unshift({prev:e,next:a,parent:r}),e=e?.nextSibling;return e}if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let l=s.get(t.key);if(!l&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!l&&e!==null){let a=document.createTextNode("");return r.insertBefore(a,e),n.unshift({prev:a,next:t,parent:r}),e}return!l||l===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(l,e),n.unshift({prev:l,next:t,parent:r}),e)}function*Mt(e){for(let t of e.children)yield*Sr(t)}function*Sr(e){if(e.elements!==void 0)for(let t of e.elements)yield*Sr(t);else e.subtree!==void 0?yield*Sr(e.subtree()):yield e}var Jn=class e{static start({init:t,update:r,view:n},i,s){if(!Yn())return new f(new Nt);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new f(new Cr(i));let l=new e(o,t(s),r,n);return new c(a=>l.send(a))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.requestAnimationFrame(()=>this.#n(n.all.toArray(),!0))}root;send(t){if(t instanceof Tt){if(t[0]instanceof Tr){this.#t=window.cancelAnimationFrame(this.#t),this.#i=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>l=>{let a=s(l);a instanceof c&&this.send(new le(a[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Wn(i,r,n)}}else if(t instanceof le){let r=t[0],n=t[1]??!1;this.#i.push(r),n?(this.#t=window.cancelAnimationFrame(this.#t),this.#n()):this.#t||(this.#t=window.requestAnimationFrame(()=>this.#n()))}else if(t instanceof St){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof Ct)for(this.#t=window.cancelAnimationFrame(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[],r=!1){if(this.#t=void 0,!this.#o(t,r))return;let n=this.#r(this.#e),i=(o,l=!1)=>a=>{let d=o(a);d instanceof c&&this.send(new le(d[0],l))},s=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Wn(s,n,i)}#o(t=[],r=!1){for(;this.#i.length>0;){let n=this.#i.shift(),[i,s]=this.#s(this.#e,n);r||=this.#e!==i,t=t.concat(s.all.toArray()),this.#e=i}for(;t.length>0;)t.shift()({dispatch:l=>this.send(new le(l)),emit:(l,a)=>this.root.dispatchEvent(new CustomEvent(l,{detail:a,bubbles:!0,composed:!0})),select:()=>{}});return this.#i.length>0?this.#o(t,r):r}},Ns=Jn.start;var Kn=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new c(l=>o.send(l))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#i=i,this.#t=i(t),this.#u=s,this.#n=new Map,this.#o=As(this.#t),this.#l(r.all.toArray())}send(t){if(t instanceof Lr){for(let r of t[0]){let n=this.#u.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof f||this.#r.push(i)}this.#l()}else if(t instanceof Or)this.#r=this.#r.concat(t[0].toArray()),this.#l(t[1].all.toArray());else if(!(t instanceof Tt))if(t instanceof le)this.#r.push(t[0]),this.#l();else if(t instanceof St){let r=new kr(t[0],t[1]);for(let[n,i]of this.#n)i(r)}else if(t instanceof vr){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof f)return;this.#r.push(n[0]),this.#l()}else if(t instanceof jr){let r=ar(this.#u),n=new Ar(r,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](n)}else t instanceof Er&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#u;#l(t=[]){if(!this.#a(!1,t))return;let r=this.#i(this.#e),n=elements(this.#t,r);if(!zs(n)){let i=new br(n);for(let[s,o]of this.#n)o(i)}this.#t=r,this.#o=n.handlers}#a(t=!1,r=[]){for(;this.#r.length>0;){let n=this.#r.shift(),[i,s]=this.#s(this.#e,n);t||=this.#e!==i,r=r.concat(s.all.toArray()),this.#e=i}for(;r.length>0;)r.shift()({dispatch:l=>this.send(new le(l)),emit:(l,a)=>this.root.dispatchEvent(new CustomEvent(l,{detail:a,bubbles:!0,composed:!0})),select:()=>{}});return this.#r.length>0?this.#a(t,r):t}},ju=Kn.start,Yn=()=>globalThis.window&&window.document;var Vn=class extends p{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var Cr=class extends p{constructor(t){super(),this.selector=t}},Nt=class extends p{};function Ps(e,t,r){return new Vn(e,t,r,new _)}function Fs(e,t,r){return $e(!Yn(),new f(new Nt),()=>Ns(e,t,r))}var Ye=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function qr(e){return Promise.resolve(Ye.wrap(e))}function Is(e,t){return e.then(r=>t(Ye.unwrap(r)))}function zr(e,t){return e.then(r=>Ye.wrap(t(Ye.unwrap(r))))}function Zn(e,t){return e.catch(r=>t(r))}function Gs(e,t){return zr(e,n=>(t(n),n))}function Mr(e,t){return Is(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return qr(new f(i))}})}function Xn(e){return new Audio(e)}async function Qn(e){try{return await e.play(),new c}catch(t){return new f(t.toString())}}function Cu(){return globalThis}function qu(e){window.alert(e)}function zu(e,t){return window.addEventListener(e,t)}async function Mu(){try{return new c(await window.navigator.wakeLock.request("screen"))}catch(e){return new f(e.toString())}}function ei(){return window.location.href}function Nu(e){try{return new c(e.location.href)}catch(t){return new f(t.toString())}}function Pu(e,t){e.location.href=t}function Fu(){return window.location.reload()}function Iu(e){return e.location.reload()}function Gu(e){return e.focus()}function Du(){let e=window.location.hash;return e==""?new f:new c(decodeURIComponent(e.slice(1)))}function Bu(){let e=window.location.search;return e==""?new f:new c(decodeURIComponent(e.slice(1)))}function Ru(e){return e.innerHeight}function Uu(e){return e.innerWidth}function Hu(e){return e.outerHeight}function Wu(e){return e.outerWidth}function Ju(e){return e.screenX}function Ku(e){return e.screenY}function Yu(e){return e.screenTop}function Vu(e){return e.screenLeft}function Zu(e){return e.scrollX}function Xu(e){return e.scrollY}function Qu(e,t,r){try{return new c(window.open(e,t,r))}catch(n){return new f(n.toString())}}function ea(e){e.close()}function ta(e){return e.closed}function ra(e){return window.queueMicrotask(e)}function na(e){return window.requestAnimationFrame(e)}function ia(e){return window.cancelAnimationFrame(e)}function sa(string){try{return new c(eval(string))}catch(e){return new f(e.toString())}}async function oa(e){try{return new c(await import(e))}catch(t){return new f(t.toString())}}function ti(e){console.log(e)}function Nr(e){console.error(e)}function ue(e){return Ts(e)}function Bs(e,t){return Z("h1",e,t)}function Rs(e,t){return Z("h3",e,t)}function X(e,t){return Z("div",e,t)}function Us(e,t){return Z("li",e,t)}function Hs(e,t){return Z("ul",e,t)}function Ws(e,t){return Z("a",e,t)}function Pr(e,t){return Z("span",e,t)}function Xe(e){return Z("img",e,u([]))}function Js(e,t){return Z("button",e,t)}function Ks(e){return Z("input",e,u([]))}var ae=class extends p{},Pt=class extends p{},Ir=class extends p{},Gr=class extends p{},Dr=class extends p{},Br=class extends p{},Rr=class extends p{},Ur=class extends p{},Hr=class extends p{};var he=class extends p{},Pe=class extends p{};function Ys(e){return e instanceof Rr?"connect":e instanceof Dr?"delete":e instanceof ae?"get":e instanceof Ir?"head":e instanceof Ur?"options":e instanceof Hr?"patch":e instanceof Pt?"post":e instanceof Gr?"put":e instanceof Br?"trace":e[0]}function Vs(e){return e instanceof he?"http":"https"}var Wr=class extends p{constructor(t,r,n,i,s,o,l,a){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=l,this.query=a}};function to(e){return new At(new $(Vs(e.scheme)),new _,new $(e.host),e.port,e.path,e.query,new _)}function ri(e,t,r){let n=fr(e.headers,je(t),r);return e.withFields({headers:n})}function Jr(e,t){let r=e.method,n=e.headers,i=e.scheme,s=e.host,o=e.port,l=e.path,a=e.query;return new Wr(r,n,t,i,s,o,l,a)}function ro(e,t){let r=i=>Oe(u([In(i[0]),"=",In(i[1])])),n=(()=>{let s=P(t,r),o=rr(s,ct("&")),l=dn(o),a=J(l);return new $(a)})();return e.withFields({query:n})}function ni(e,t){return e.withFields({method:t})}function no(){return new Wr(new ae,u([]),"",new Pe,"localhost",new _,"",new _)}function io(e,t){return e.withFields({scheme:t})}function so(e,t){return e.withFields({host:t})}function oo(e,t){return e.withFields({port:new $(t)})}function lo(e,t){return e.withFields({path:t})}var we=class extends p{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};async function ao(e){try{return new c(await fetch(e))}catch(t){return new f(new Kr(t.toString()))}}function po(e){return new we(e.status,S.fromArray([...e.headers]),e)}function co(e){let t=$s(to(e)),r=Ys(e.method).toUpperCase(),n={headers:da(e.headers),method:r};return r!=="GET"&&r!=="HEAD"&&(n.body=e.body),new globalThis.Request(t,n)}function da(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function ii(e){let t;try{t=await e.body.text()}catch{return new f(new Yr)}return new c(e.withFields({body:t}))}var Kr=class extends p{constructor(t){super(),this[0]=t}},Yr=class extends p{};function fo(e){let r=co(e),n=ao(r);return Mr(n,i=>qr(new c(po(i))))}var si=class extends p{constructor(t){super(),this[0]=t}},Vr=class extends p{constructor(t){super(),this[0]=t}},Zr=class extends p{},oi=class extends p{},Ft=class extends p{constructor(t,r){super(),this[0]=t,this[1]=r}},li=class extends p{},ui=class extends p{constructor(t){super(),this.run=t}};function $a(e,t,r){let n=fo(e),i=Mr(n,ii),s=zr(i,l=>{if(l.isOk()){let a=l[0];return t.run(new c(a))}else return t.run(new f(new Zr))}),o=Zn(s,l=>t.run(new f(new Zr)));Gs(o,r)}function _o(e,t){return me(r=>$a(e,t,r))}function ma(e){if(e instanceof we&&200<=e.status&&e.status<=299){let t=e.status,r=e.body;return new c(r)}else{if(e instanceof we&&e.status===401)return new f(new li);if(e instanceof we&&e.status===404)return new f(new oi);if(e instanceof we&&e.status===500){let t=e.body;return new f(new si(t))}else{let t=e.status,r=e.body;return new f(new Ft(t,r))}}}function $o(e){return new ui(t=>{let n=T(t,ma);return e(n)})}var ai=class extends p{constructor(t,r,n,i,s,o,l){super(),this.id=t,this.title=r,this.artists=n,this.album=i,this.album_cover=s,this.source=o,this.preview_url=l}},Xr=class extends p{constructor(t){super(),this.url=t}},pi=class extends p{constructor(t){super(),this.url=t}};function wa(e){if(e instanceof Xr){let t=e.url;return Ot(u([["source",U("youtube")],["url",U(t)]]))}else{let t=e.url;return Ot(u([["source",U("spotify")],["url",U(t)]]))}}function mo(e){return Ot(u([["id",U(e.id)],["title",U(e.title)],["artists",(()=>{let t=e.artists;return vt(t,U)})()],["album",U(e.album)],["album_cover",U(e.album_cover)],["source",wa(e.source)],["preview_url",ys(e.preview_url,U)]]))}function xa(e){let t=(()=>{let r=e;return I("source",F)(r)})();if(t.isOk()&&t[0]==="youtube"){let r=e,n=I("url",F)(r);return C(n,i=>new Xr(i))}else if(t.isOk()&&t[0]==="spotify"){let r=e,n=I("url",F)(r);return C(n,i=>new pi(i))}else if(t.isOk()){let r=t[0];return new f(u([new B("Wrong source name",r,u(["source"]))]))}else{let r=t[0];return new f(r)}}function ho(e){let t=e;return Ri((r,n,i,s,o,l,a)=>new ai(r,n,i,s,o,l,a),I("id",F),I("title",F),I("artists",Be(F)),I("album",F),I("album_cover",F),I("source",xa),I("preview_url",Di(F)))(t)}var Qe=class extends p{constructor(t){super(),this.search=t}},et=class extends p{constructor(t){super(),this.results=t}},Qr=class extends p{constructor(t){super(),this.error=t}},tt=class extends p{constructor(t){super(),this.message=t}},rt=class extends p{constructor(t){super(),this.preview_url=t}};function wo(){return u([Rs(u([A("text-lg mb-4 text-center")]),u([ue("Search songs and create playlists that can be exported to Spotify, Youtube Music,...")])),Ws(u([js("/login"),A("text-green-400 bg-zinc-700 hover:bg-zinc-600 rounded-md font-bold flex gap-2 py-2 px-4")]),u([Xe(u([Je("https://storage.googleapis.com/pr-newsroom-wp/1/2023/05/Spotify_Primary_Logo_RGB_Green.png"),A("h-6")])),ue("Login to Spotify")]))])}function xo(e){return X(u([A("bg-zinc-800 min-w-screen min-h-screen text-pink-100")]),u([X(u([A("w-11/12 md:w-3/4 lg:w-1/2 max-w-3xl mx-auto flex flex-col items-center py-8")]),m(Bs(u([A("text-4xl font-bold mb-8")]),u([ue("Playlist Maker")])),e))]))}function Na(e,t){return r=>q(Be(ir)(r),n=>{if(e>=0){let o=ht(n,e),l=kt(o),a=pn(l,u([new B("A list with at least"+j(e+1)+"elements","A list with"+j(Nn(n))+"elements",u([j(e)]))]));return T(a,t)}else return new f(u([new B("An 'index' decoder with a non-negative index",j(e),u([]))]))})}function Pa(e,t){return sr(u([Bi(e,t),I(j(e),t),Na(e,t)]))}function fi(e,t,r){if(e.hasLength(0))return t(r);{let n=e.head,i=e.tail,s=ke(n);if(s.isOk()){let o=s[0],l=r,a=Pa(o,ir)(l);return T(a,d=>fi(i,t,d))}else{let o=r,l=I(n,ir)(o);return T(l,a=>fi(i,t,a))}}}function go(e,t){return r=>fi(e,t,r)}function di(e,t){return Os(e,t)}function yo(){return X(u([A("mt-8 w-8 h-8 animate-spin rounded-full border-2 border-t-zinc-800 border-x-zinc-800/50 border-b-zinc-800/50")]),u([]))}function Da(e){let t=e,r=go(u(["target","previousElementSibling","value"]),F)(t);return C(r,n=>new Qe(n))}function Ba(e){let t=e.preview_url;if(t instanceof $){let r=t[0];return X(u([A("group relative")]),u([Xe(u([Je(e.album_cover),A("w-16 h-16 rounded-sm"),di("click",n=>new c(new rt(r)))])),X(u([A("absolute w-full h-full top-0 left-0 group-hover:opacity-100 bg-zinc-100/50 p-2 opacity-0 transition-opacity duration-300")]),u([Xe(u([Je("https://www.svgrepo.com/download/524827/play-circle.svg")]))]))]))}else return X(u([]),u([Xe(u([Je(e.album_cover),A("w-16 h-16 rounded-sm")]))]))}function Ra(e){return X(u([A("flex items-center gap-4 py-4 px-8 bg-zinc-700/50 hover:bg-zinc-700/80")]),u([Ba(e),X(u([A("flex flex-col flex-1")]),u([Pr(u([A("font-semibold")]),u([ue(e.title)])),Pr(u([A("text-sm text-zinc-100/70")]),u([ue((()=>{let t=e.artists;return K(t," - ")})())])),Pr(u([A("text-sm text-zinc-100/70")]),u([ue(e.album)]))]))]))}function Ua(e){return Es(t=>Hs(u([A("rounded-lg overflow-clip mt-8 w-full")]),t),P(e,t=>{let r=Us(u([]),u([Ra(t)]));return[t.id,r]}))}function bo(e,t){return u([X(u([A("rounded-md overflow-clip flex items-stretch")]),u([Ks(u([A("py-2 px-4 bg-zinc-700/30 hover:bg-zinc-700/70 focus:bg-zinc-600/80"),vs("search-songs")])),Js(u([A("bg-zinc-700 hover:bg-zinc-600 py-2 px-4"),di("click",Da)]),u([ue("Search")]))])),e?yo():Ua(t)])}var en=class extends p{constructor(t){super(),this.msg=t}},tn=class extends p{constructor(t){super(),this.err=t}};var It=class extends p{},rn=class extends p{},nt=class extends p{},nn=class extends p{constructor(t,r){super(),this.encoder=t,this.decoder=r}},sn=class extends p{constructor(t,r){super(),this.btype=t,this.converter=r}};function _i(){return new sn(new It,new nn(e=>fn(),e=>new c(void 0)))}function Ao(e,t){return new sn(new nt,new nn(r=>{let i=e(r);return gs(i)},r=>{let n=wr(r,t);return re(n,i=>new tn(i))}))}function $i(e,t){let r=t;return e.converter.encoder(r)}function Lo(e,t){let r=t;return e.converter.decoder(r)}function Oo(e){return e.btype}var hi=class extends p{};var wi=class extends p{constructor(t,r){super(),this.encoder=t,this.decoder=r}},xi=class extends p{constructor(t,r){super(),this.ptype=t,this.converter=r}};function on(e){return new xi(new hi,new wi(t=>e,t=>$e(b(t,e),new c(void 0),()=>new f(void 0))))}function vo(e,t){let r=t;return e.converter.encoder(r)}function jo(e){return e.ptype}var Gt=class extends p{},Dt=class extends p{},Bt=class extends p{constructor(t,r){super(),this.encoder=t,this.decoder=r}},ln=class extends p{constructor(t,r){super(),this.qtype=t,this.converter=r}};function Eo(){return new ln(new Gt,new Bt(e=>u([]),e=>new c(void 0)))}function To(e){return new ln(new Dt,e)}function So(e,t){let r=t;return e.converter.encoder(r)}function Co(e){return e.qtype}var it=class extends p{constructor(t,r,n,i,s){super(),this.method=t,this.path=r,this.query=n,this.req_body=i,this.res_body=s}};function qo(){return new it(new ae,on(u([])),Eo(),_i(),_i())}function zo(e,t){return e.withFields({method:t})}function Mo(e,t){return new it(e.method,t,e.query,e.req_body,e.res_body)}function No(e,t){return new it(e.method,e.path,t,e.req_body,e.res_body)}function Po(e,t){return new it(e.method,e.path,e.query,e.req_body,t)}var Rt=class extends p{constructor(t,r,n){super(),this.scheme=t,this.host=r,this.port=n}},bi=class extends p{constructor(t,r,n,i,s,o,l){super(),this.route=t,this.scheme=r,this.host=n,this.port=i,this.path_opt=s,this.query_opt=o,this.body_opt=l}};function Fo(){return new Rt(new he,"localhost",80)}function Io(e,t){return t instanceof he?new Rt(new he,e.host,80):new Rt(new Pe,e.host,443)}function Go(e,t){return e.withFields({host:t})}function Do(e,t){return e.withFields({port:t})}function Bo(e,t){return new bi(t,e.scheme,e.host,e.port,new _,new _,new _)}function Ro(e,t){return e.withFields({path_opt:new $(t)})}function Uo(e,t){return e.withFields({query_opt:new $(t)})}function Ja(e,t,r,n){let i=(()=>{let o=t.route.path;return jo(o)})(),s=t.path_opt;if(s instanceof _)return r("Path option is missing, please call with_path before send");{let o=s[0];return n(lo(e,(()=>{let a=t.route.path,d=vo(a,o);return K(d,"/")})()))}}function Ka(e,t,r,n){let i=(()=>{let o=t.route.query;return Co(o)})(),s=t.query_opt;if(i instanceof Dt&&s instanceof _)return r("Query option is missing, please call with_query before send");if(i instanceof Gt)return n(e);{let o=s[0];return n(ro(e,(()=>{let a=t.route.query;return So(a,o)})()))}}function Ya(e,t,r,n){let i=(()=>{let o=t.route.req_body;return Oo(o)})(),s=t.body_opt;if(i instanceof nt&&s instanceof _)return r("Body option is missing, please call with_body before send");if(i instanceof rn&&s instanceof _)return r("Body option is missing, please call with_body before send");if(i instanceof It)return n(e);if(i instanceof nt&&s instanceof $){let o=s[0];return n((()=>{let a=Jr(e,(()=>{let d=t.route.req_body,h=$i(d,o);return J(h)})());return ri(a,"Content-Type","application/json")})())}else{let o=s[0];return n(Jr(e,(()=>{let a=t.route.req_body,d=$i(a,o);return J(d)})()))}}function Va(e){if(e instanceof en){let t=e.msg;return new Ft(500,t)}else{let t=e.err;return new Vr(t)}}function Ho(e,t,r){let n=(()=>{let i=no();return ni(i,e.route.method)})();return Ja(n,e,r,i=>Ka(i,e,r,s=>Ya(s,e,r,o=>{let a=(()=>{let h=io(o,e.scheme),w=so(h,e.host);return oo(w,e.port)})();return _o(a,$o(d=>{let w=T(d,g=>{let L=e.route.res_body,H=Lo(L,g);return re(H,Va)});return t(w)}))})))}var Ut=class extends p{constructor(t,r){super(),this.search=t,this.token=r}};function Za(e){return u([["q",e.search],["token",e.token]])}function Xa(e){return q(_e(e,"q"),t=>q(_e(e,"token"),r=>new c(new Ut(t,r))))}function Jo(){let e=qo(),t=zo(e,new ae),r=Mo(t,on(u(["songs","search"]))),n=No(r,To(new Bt(Za,Xa)));return Po(n,Ao(i=>vt(i,mo),Be(ho)))}function Ko(){let e=Fo(),t=Io(e,new he),r=Go(t,"localhost");return Do(r,2345)}function Yo(e,t){let r=Ko(),n=Bo(r,Jo()),i=Ro(n,void 0),s=Uo(i,new Ut(e,t));return Ho(s,o=>{if(o.isOk()){let l=o[0];return new et(l)}else{let l=o[0];return new Qr(l)}},o=>me(l=>l(new tt(o))))}var Ht=class extends p{constructor(t,r,n,i){super(),this.token=t,this.last_search=r,this.searching=n,this.results=i}};function rp(e){let t=(()=>{let r=_r(ei()),n=T(r,s=>Fn((()=>{let o=s.query;return be(o,"")})())),i=T(n,s=>_e(s,"token"));return ut(i,"")})();return[new Ht(t,"",!1,u([])),me(r=>ti(t))]}function np(e,t){if(t instanceof Qe){let r=t.search;return[e.withFields({last_search:r,searching:!0}),Yo(r,e.token)]}else if(t instanceof et){let r=t.results;return[e.withFields({searching:!1,results:r}),Un()]}else if(t instanceof rt){let r=t.preview_url;return[e,me(n=>{let i=Xn(r);Qn(i)})]}else if(t instanceof tt){let r=t.message;return[e,me(n=>Nr(r))]}else{let r=t.error;return[e,me(n=>Nr(r))]}}function ip(e){let t=(()=>{if(e instanceof Ht&&e.token===""){let r=e.token;return wo()}else{let r=e.searching,n=e.results;return bo(r,n)}})();return xo(t)}function Vo(){let e=Ps(rp,np,ip),t=Fs(e,"#app",void 0);if(!t.isOk())throw ye("assignment_no_match","client",22,"main","Assignment pattern did not match",{value:t})}Vo();
